{"file_contents":{"client/src/components/StatusBadge.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Check, AlertTriangle, X, Info } from \"lucide-react\";\n\ntype StatusType = \"success\" | \"error\" | \"warning\" | \"info\";\n\ninterface StatusBadgeProps {\n  status: StatusType;\n  label: string;\n}\n\nconst statusConfig = {\n  success: {\n    variant: \"default\" as const,\n    icon: Check,\n    className: \"bg-emerald-600 text-white\",\n  },\n  error: {\n    variant: \"destructive\" as const,\n    icon: X,\n    className: \"\",\n  },\n  warning: {\n    variant: \"default\" as const,\n    icon: AlertTriangle,\n    className: \"bg-amber-500 text-white\",\n  },\n  info: {\n    variant: \"secondary\" as const,\n    icon: Info,\n    className: \"\",\n  },\n};\n\nexport default function StatusBadge({ status, label }: StatusBadgeProps) {\n  const config = statusConfig[status];\n  const Icon = config.icon;\n\n  return (\n    <Badge\n      variant={config.variant}\n      className={`gap-1 text-xs font-medium ${config.className}`}\n      data-testid={`badge-status-${status}`}\n    >\n      <Icon className=\"h-3 w-3\" />\n      {label}\n    </Badge>\n  );\n}\n","path":null,"size_bytes":1051,"size_tokens":null},"client/src/components/examples/WorkflowStep.tsx":{"content":"import WorkflowStep from \"../WorkflowStep\";\n\nexport default function WorkflowStepExample() {\n  return (\n    <div className=\"w-80 space-y-3\">\n      <WorkflowStep\n        stepNumber={1}\n        question=\"Show top 10 customers by revenue\"\n        sqlSnippet=\"SELECT customer_id, SUM(order_total)...\"\n        timestamp=\"2:30 PM\"\n        status=\"completed\"\n        onClick={() => console.log(\"Clicked step 1\")}\n      />\n      <WorkflowStep\n        stepNumber={2}\n        question=\"Break down by product category\"\n        sqlSnippet=\"SELECT category, SUM(revenue)...\"\n        timestamp=\"2:35 PM\"\n        status=\"current\"\n        onClick={() => console.log(\"Clicked step 2\")}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":696,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"server/storage.ts":{"content":"import { \n  type User, type InsertUser,\n  type Conversation, type InsertConversation,\n  type Message, type InsertMessage,\n  type WorkflowStep, type InsertWorkflowStep\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  getConversations(): Promise<Conversation[]>;\n  getConversation(id: string): Promise<Conversation | undefined>;\n  createConversation(conversation: InsertConversation): Promise<Conversation>;\n  updateConversation(id: string, updates: Partial<InsertConversation>): Promise<Conversation | undefined>;\n  deleteConversation(id: string): Promise<boolean>;\n  \n  getMessages(conversationId: string): Promise<Message[]>;\n  createMessage(message: InsertMessage): Promise<Message>;\n  \n  getWorkflowSteps(conversationId: string): Promise<WorkflowStep[]>;\n  createWorkflowStep(step: InsertWorkflowStep): Promise<WorkflowStep>;\n  updateWorkflowStep(id: string, updates: Partial<InsertWorkflowStep>): Promise<WorkflowStep | undefined>;\n  clearWorkflowSteps(conversationId: string): Promise<void>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n  private conversations: Map<string, Conversation>;\n  private messages: Map<string, Message>;\n  private workflowSteps: Map<string, WorkflowStep>;\n\n  constructor() {\n    this.users = new Map();\n    this.conversations = new Map();\n    this.messages = new Map();\n    this.workflowSteps = new Map();\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n\n  async getConversations(): Promise<Conversation[]> {\n    return Array.from(this.conversations.values())\n      .sort((a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime());\n  }\n\n  async getConversation(id: string): Promise<Conversation | undefined> {\n    return this.conversations.get(id);\n  }\n\n  async createConversation(insertConversation: InsertConversation): Promise<Conversation> {\n    const id = randomUUID();\n    const now = new Date();\n    const conversation: Conversation = {\n      ...insertConversation,\n      id,\n      createdAt: now,\n      updatedAt: now,\n    };\n    this.conversations.set(id, conversation);\n    return conversation;\n  }\n\n  async updateConversation(id: string, updates: Partial<InsertConversation>): Promise<Conversation | undefined> {\n    const existing = this.conversations.get(id);\n    if (!existing) return undefined;\n    \n    const updated: Conversation = {\n      ...existing,\n      ...updates,\n      updatedAt: new Date(),\n    };\n    this.conversations.set(id, updated);\n    return updated;\n  }\n\n  async deleteConversation(id: string): Promise<boolean> {\n    const messagesForConvo = Array.from(this.messages.values())\n      .filter(m => m.conversationId === id);\n    for (const msg of messagesForConvo) {\n      this.messages.delete(msg.id);\n    }\n    \n    const stepsForConvo = Array.from(this.workflowSteps.values())\n      .filter(s => s.conversationId === id);\n    for (const step of stepsForConvo) {\n      this.workflowSteps.delete(step.id);\n    }\n    \n    return this.conversations.delete(id);\n  }\n\n  async getMessages(conversationId: string): Promise<Message[]> {\n    return Array.from(this.messages.values())\n      .filter(m => m.conversationId === conversationId)\n      .sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n  }\n\n  async createMessage(insertMessage: InsertMessage): Promise<Message> {\n    const id = randomUUID();\n    const message: Message = {\n      ...insertMessage,\n      hasResponse: insertMessage.hasResponse ?? false,\n      id,\n      createdAt: new Date(),\n    };\n    this.messages.set(id, message);\n    return message;\n  }\n\n  async getWorkflowSteps(conversationId: string): Promise<WorkflowStep[]> {\n    return Array.from(this.workflowSteps.values())\n      .filter(s => s.conversationId === conversationId)\n      .sort((a, b) => a.stepNumber - b.stepNumber);\n  }\n\n  async createWorkflowStep(insertStep: InsertWorkflowStep): Promise<WorkflowStep> {\n    const id = randomUUID();\n    const step: WorkflowStep = {\n      ...insertStep,\n      response: insertStep.response ?? null,\n      id,\n      createdAt: new Date(),\n    };\n    this.workflowSteps.set(id, step);\n    return step;\n  }\n\n  async updateWorkflowStep(id: string, updates: Partial<InsertWorkflowStep>): Promise<WorkflowStep | undefined> {\n    const existing = this.workflowSteps.get(id);\n    if (!existing) return undefined;\n    \n    const updated: WorkflowStep = {\n      ...existing,\n      ...updates,\n    };\n    this.workflowSteps.set(id, updated);\n    return updated;\n  }\n\n  async clearWorkflowSteps(conversationId: string): Promise<void> {\n    const stepsForConvo = Array.from(this.workflowSteps.values())\n      .filter(s => s.conversationId === conversationId);\n    for (const step of stepsForConvo) {\n      this.workflowSteps.delete(step.id);\n    }\n  }\n}\n\nexport const storage = new MemStorage();\n","path":null,"size_bytes":5429,"size_tokens":null},"client/src/components/examples/Header.tsx":{"content":"import { useState } from \"react\";\nimport Header from \"../Header\";\n\nexport default function HeaderExample() {\n  const [role, setRole] = useState(\"analyst\");\n  const [panelOpen, setPanelOpen] = useState(true);\n\n  return (\n    <Header\n      currentRole={role}\n      onRoleChange={setRole}\n      workflowPanelOpen={panelOpen}\n      onToggleWorkflowPanel={() => setPanelOpen(!panelOpen)}\n    />\n  );\n}\n","path":null,"size_bytes":397,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/components/ResultsTable.tsx":{"content":"import {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\n\ninterface ResultsTableProps {\n  columns: string[];\n  data: Record<string, string | number | null>[];\n  maxRows?: number;\n}\n\nexport default function ResultsTable({ columns, data, maxRows = 10 }: ResultsTableProps) {\n  const displayData = data.slice(0, maxRows);\n  const hasMore = data.length > maxRows;\n\n  return (\n    <div className=\"rounded-md border border-border\" data-testid=\"results-table\">\n      <ScrollArea className=\"w-full\">\n        <Table>\n          <TableHeader>\n            <TableRow className=\"bg-muted/50\">\n              {columns.map((col) => (\n                <TableHead\n                  key={col}\n                  className=\"whitespace-nowrap font-medium text-foreground\"\n                >\n                  {col}\n                </TableHead>\n              ))}\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {displayData.map((row, i) => (\n              <TableRow key={i} className=\"hover-elevate\" data-testid={`row-result-${i}`}>\n                {columns.map((col) => (\n                  <TableCell key={col} className=\"whitespace-nowrap font-mono text-sm\">\n                    {row[col] === null ? (\n                      <span className=\"text-muted-foreground italic\">NULL</span>\n                    ) : (\n                      String(row[col])\n                    )}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <ScrollBar orientation=\"horizontal\" />\n      </ScrollArea>\n      {hasMore && (\n        <div className=\"border-t border-border bg-muted/30 px-4 py-2 text-center text-xs text-muted-foreground\">\n          Showing {maxRows} of {data.length} rows\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":1935,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"design_guidelines.md":{"content":"# Design Guidelines: Multi-Agent Snowflake Analytics Portal\n\n## Design Approach\n\n**Selected System**: Material Design 3 (Enterprise variant)\n**Rationale**: Enterprise analytics platform requiring information density, clear data hierarchy, and professional credibility. Material Design 3 provides robust patterns for complex data displays, structured layouts, and enterprise workflows.\n\n**Key Principles**:\n- Data clarity over decoration\n- Structured information hierarchy\n- Consistent, professional interface\n- Efficient workflow patterns\n\n---\n\n## Typography\n\n**Font Family**: Inter (via Google Fonts CDN)\n- Primary: Inter (400, 500, 600, 700)\n\n**Hierarchy**:\n- Page Title: text-2xl font-semibold (Agent Portal, Workflow History)\n- Section Headers: text-lg font-semibold (Generated SQL, Results Preview)\n- Component Labels: text-sm font-medium (Intent Summary, Cost Estimate)\n- Body Text: text-sm font-normal (chat messages, descriptions)\n- Code/Data: text-sm font-mono (SQL queries, JSON output)\n- Metadata/Timestamps: text-xs (workflow timestamps, step metadata)\n\n---\n\n## Layout System\n\n**Spacing Primitives**: Tailwind units of 2, 4, 6, 8, 12\n- Component padding: p-4 or p-6\n- Section spacing: space-y-4 or space-y-6\n- Grid gaps: gap-4 or gap-6\n- Tight groupings: space-y-2\n\n**Grid Structure**:\n- Main Layout: Three-column grid (Chat Sidebar | Main Content | Workflow Panel)\n- Chat Sidebar: w-80 (fixed width)\n- Main Content: flex-1 (responsive center)\n- Workflow Panel: w-96 (fixed width, collapsible on mobile)\n- Mobile: Stack vertically, full-width sections\n\n---\n\n## Component Library\n\n### Core Layout Components\n\n**Chat Sidebar** (Left Panel):\n- Fixed-width vertical panel (w-80)\n- Conversation list with timestamps\n- New conversation button at top\n- Scroll container for message history\n- Active conversation highlight state\n\n**Main Content Area** (Center):\n- Message feed with alternating user/assistant messages\n- Structured JSON output cards showing all response fields\n- SQL code block with syntax highlighting placeholder\n- Results table with horizontal scroll\n- Input textarea with send button (bottom-fixed)\n\n**Workflow Panel** (Right):\n- Collapsible panel showing saved workflow steps\n- Step cards displaying: question, SQL snippet, timestamp\n- Visual connection lines between related steps\n- Click to load/resume step functionality\n\n### Data Display Components\n\n**JSON Output Card**:\n- Bordered container with rounded corners\n- Key-value pairs in two-column grid\n- Expandable/collapsible sections for large outputs\n- Monospace font for technical values\n- Status badges (PASS/FAIL validation)\n\n**SQL Code Block**:\n- Full-width container with slight inset\n- Monospace font, line numbers on left\n- Copy-to-clipboard button (top-right)\n- Horizontal scroll for long queries\n- Syntax highlighting via library (highlight.js or Prism)\n\n**Results Table**:\n- Bordered table with header row\n- Sticky header on scroll\n- Alternating row background for readability\n- Horizontal scroll container\n- Row hover states\n- Cell padding: p-3\n\n**Cost Estimate Display**:\n- Inline metric cards showing: bytes scanned, credits, optimization score\n- Icon + value + label structure\n- Warning/success states for cost thresholds\n- Horizontal arrangement in card grid\n\n### Form Components\n\n**Chat Input**:\n- Multi-line textarea (min-h-24)\n- Auto-resize on content\n- Send button (icon-only, positioned bottom-right of textarea)\n- Submit on Cmd/Ctrl+Enter\n- Voice input button (optional icon)\n- File upload button for PDF/Excel inputs\n\n**Filters & Controls**:\n- Dropdown selects for role selection (Snowflake RBAC)\n- Toggle switches for feature flags (cost optimization, explainability)\n- Date range picker for workflow history filtering\n\n### Navigation Components\n\n**Top Navigation Bar**:\n- Full-width horizontal bar\n- Logo/title (left)\n- User profile dropdown (right)\n- Settings icon\n- Height: h-16\n\n**Tab Navigation** (within main content):\n- Horizontal tabs: Query | Results | Explain | Optimize\n- Active tab indicator (bottom border)\n- Padding: px-4 py-2\n\n### Feedback Components\n\n**Status Badges**:\n- Small pill-shaped indicators\n- States: Success (PASS), Error (FAIL), Warning (High Cost), Info\n- Text size: text-xs font-medium\n- Padding: px-2 py-1\n\n**Loading States**:\n- Skeleton loaders for table rows during query execution\n- Spinner overlay for SQL generation\n- Progress bar for large result sets\n\n**Toast Notifications**:\n- Top-right positioned alerts\n- Auto-dismiss after 4 seconds\n- Types: Success, Error, Warning, Info\n- Slide-in animation\n\n### Recommended Next Steps Panel:\n- Card-based list of suggested queries\n- Bullet points with clickable actions\n- Icon prefix for each suggestion type\n- Hover state with slight elevation\n\n---\n\n## Animations\n\n**Minimal Motion**:\n- Smooth transitions on tab switches (duration-200)\n- Hover state transitions (transition-colors)\n- Panel collapse/expand (slide animation)\n- NO complex scroll animations or parallax effects\n\n---\n\n## Icons\n\n**Library**: Heroicons (via CDN)\n- Send: Paper airplane icon\n- Copy: Clipboard icon\n- Download: Arrow down tray\n- Settings: Cog icon\n- User: User circle\n- Close: X mark\n- Chevrons: For expandable sections\n- Check/Warning: For status indicators\n\n---\n\n## Accessibility\n\n- Consistent focus states with visible outline rings\n- Keyboard navigation for all interactive elements\n- ARIA labels for icon-only buttons\n- Semantic HTML structure\n- Form labels properly associated with inputs\n- Table headers with proper scope attributes\n\n---\n\n## Images\n\n**No hero images required** for this enterprise analytics application. The interface is data-focused and utility-driven.\n\n**Icon Usage Only**:\n- Agent/workflow status icons\n- File type indicators for document uploads\n- Empty state illustrations (simple line art for \"no workflows yet\")\n\nThis design prioritizes information density, professional credibility, and efficient data analysis workflows over visual decoration.","path":null,"size_bytes":5937,"size_tokens":null},"client/src/components/AccessControlInfo.tsx":{"content":"import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Shield, Eye, EyeOff, Lock } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface AccessControlInfoProps {\n  role: string;\n  maskedColumns: string[];\n  restrictedTables: string[];\n  rowFilters: string[];\n}\n\nexport default function AccessControlInfo({\n  role,\n  maskedColumns,\n  restrictedTables,\n  rowFilters,\n}: AccessControlInfoProps) {\n  return (\n    <Card data-testid=\"access-control-info\">\n      <CardHeader className=\"flex flex-row items-center gap-2 space-y-0 pb-2\">\n        <Shield className=\"h-4 w-4 text-primary\" />\n        <span className=\"text-sm font-medium\">Access Control Applied</span>\n        <Badge variant=\"secondary\" className=\"ml-auto text-xs\">\n          {role}\n        </Badge>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {maskedColumns.length > 0 && (\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n              <EyeOff className=\"h-3 w-3\" />\n              Masked Columns\n            </div>\n            <div className=\"flex flex-wrap gap-1\">\n              {maskedColumns.map((col) => (\n                <Badge key={col} variant=\"outline\" className=\"text-xs\">\n                  {col}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {restrictedTables.length > 0 && (\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n              <Lock className=\"h-3 w-3\" />\n              Restricted Tables\n            </div>\n            <div className=\"flex flex-wrap gap-1\">\n              {restrictedTables.map((table) => (\n                <Badge key={table} variant=\"outline\" className=\"text-xs text-destructive\">\n                  {table}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {rowFilters.length > 0 && (\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n              <Eye className=\"h-3 w-3\" />\n              Row-Level Filters\n            </div>\n            <div className=\"space-y-1\">\n              {rowFilters.map((filter, i) => (\n                <code\n                  key={i}\n                  className=\"block rounded bg-muted px-2 py-1 font-mono text-xs\"\n                >\n                  {filter}\n                </code>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {maskedColumns.length === 0 &&\n          restrictedTables.length === 0 &&\n          rowFilters.length === 0 && (\n            <p className=\"text-sm text-muted-foreground\">\n              No access restrictions applied for this query.\n            </p>\n          )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2916,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport NotFound from \"@/pages/not-found\";\nimport AnalyticsPortal from \"@/pages/AnalyticsPortal\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={AnalyticsPortal} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":732,"size_tokens":null},"client/src/components/RecommendedSteps.tsx":{"content":"import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Lightbulb, ArrowRight, TrendingUp, BarChart3, Filter } from \"lucide-react\";\n\ninterface RecommendedStep {\n  id: string;\n  label: string;\n  type: \"drill-down\" | \"compare\" | \"filter\" | \"aggregate\";\n}\n\ninterface RecommendedStepsProps {\n  steps: RecommendedStep[];\n  onSelect: (step: RecommendedStep) => void;\n}\n\nconst typeIcons = {\n  \"drill-down\": TrendingUp,\n  compare: BarChart3,\n  filter: Filter,\n  aggregate: BarChart3,\n};\n\nexport default function RecommendedSteps({ steps, onSelect }: RecommendedStepsProps) {\n  if (steps.length === 0) return null;\n\n  return (\n    <Card data-testid=\"recommended-steps\">\n      <CardHeader className=\"flex flex-row items-center gap-2 space-y-0 pb-2\">\n        <Lightbulb className=\"h-4 w-4 text-amber-500\" />\n        <span className=\"text-sm font-medium\">Recommended Next Steps</span>\n      </CardHeader>\n      <CardContent className=\"space-y-2\">\n        {steps.map((step) => {\n          const Icon = typeIcons[step.type];\n          return (\n            <button\n              key={step.id}\n              onClick={() => onSelect(step)}\n              className=\"flex w-full items-center gap-3 rounded-md border border-border px-3 py-2 text-left text-sm transition-colors hover-elevate\"\n              data-testid={`button-step-${step.id}`}\n            >\n              <Icon className=\"h-4 w-4 shrink-0 text-muted-foreground\" />\n              <span className=\"flex-1\">{step.label}</span>\n              <ArrowRight className=\"h-4 w-4 shrink-0 text-muted-foreground\" />\n            </button>\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1662,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/ConversationItem.tsx":{"content":"import { MessageSquare } from \"lucide-react\";\n\ninterface ConversationItemProps {\n  id: string;\n  title: string;\n  preview: string;\n  timestamp: string;\n  isActive?: boolean;\n  onClick: () => void;\n}\n\nexport default function ConversationItem({\n  title,\n  preview,\n  timestamp,\n  isActive = false,\n  onClick,\n}: ConversationItemProps) {\n  return (\n    <button\n      onClick={onClick}\n      className={`w-full rounded-md p-3 text-left transition-colors hover-elevate ${\n        isActive ? \"bg-sidebar-accent\" : \"\"\n      }`}\n      data-testid={`conversation-item-${title.toLowerCase().replace(/\\s+/g, \"-\")}`}\n    >\n      <div className=\"flex items-start gap-3\">\n        <div className=\"mt-0.5 rounded bg-primary/10 p-1.5\">\n          <MessageSquare className=\"h-4 w-4 text-primary\" />\n        </div>\n        <div className=\"min-w-0 flex-1\">\n          <div className=\"flex items-center justify-between gap-2\">\n            <span className=\"truncate text-sm font-medium\">{title}</span>\n            <span className=\"shrink-0 text-xs text-muted-foreground\">{timestamp}</span>\n          </div>\n          <p className=\"mt-0.5 truncate text-xs text-muted-foreground\">{preview}</p>\n        </div>\n      </div>\n    </button>\n  );\n}\n","path":null,"size_bytes":1217,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"client/src/components/examples/RecommendedSteps.tsx":{"content":"import RecommendedSteps from \"../RecommendedSteps\";\n\nconst steps = [\n  { id: \"1\", label: \"Break down revenue by product category\", type: \"drill-down\" as const },\n  { id: \"2\", label: \"Compare with previous year performance\", type: \"compare\" as const },\n  { id: \"3\", label: \"Filter by customer segment\", type: \"filter\" as const },\n];\n\nexport default function RecommendedStepsExample() {\n  return (\n    <RecommendedSteps\n      steps={steps}\n      onSelect={(step) => console.log(\"Selected step:\", step.label)}\n    />\n  );\n}\n","path":null,"size_bytes":521,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { processQuery, estimateCost, validateSQL, getAccessControl, generateRecommendedSteps } from \"./gemini\";\nimport { queryRequestSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n  \n  // Get all conversations\n  app.get(\"/api/conversations\", async (req, res) => {\n    try {\n      const conversations = await storage.getConversations();\n      res.json(conversations);\n    } catch (error) {\n      console.error(\"Error fetching conversations:\", error);\n      res.status(500).json({ error: \"Failed to fetch conversations\" });\n    }\n  });\n\n  // Get a single conversation with messages\n  app.get(\"/api/conversations/:id\", async (req, res) => {\n    try {\n      const conversation = await storage.getConversation(req.params.id);\n      if (!conversation) {\n        return res.status(404).json({ error: \"Conversation not found\" });\n      }\n      const messages = await storage.getMessages(req.params.id);\n      const workflowSteps = await storage.getWorkflowSteps(req.params.id);\n      res.json({ conversation, messages, workflowSteps });\n    } catch (error) {\n      console.error(\"Error fetching conversation:\", error);\n      res.status(500).json({ error: \"Failed to fetch conversation\" });\n    }\n  });\n\n  // Create a new conversation\n  app.post(\"/api/conversations\", async (req, res) => {\n    try {\n      const { title, preview } = req.body;\n      const conversation = await storage.createConversation({\n        title: title || \"New Analysis\",\n        preview: preview || \"Start asking questions...\",\n      });\n      res.status(201).json(conversation);\n    } catch (error) {\n      console.error(\"Error creating conversation:\", error);\n      res.status(500).json({ error: \"Failed to create conversation\" });\n    }\n  });\n\n  // Delete a conversation\n  app.delete(\"/api/conversations/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteConversation(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Conversation not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting conversation:\", error);\n      res.status(500).json({ error: \"Failed to delete conversation\" });\n    }\n  });\n\n  // Get workflow steps for a conversation\n  app.get(\"/api/conversations/:id/workflow\", async (req, res) => {\n    try {\n      const steps = await storage.getWorkflowSteps(req.params.id);\n      res.json(steps);\n    } catch (error) {\n      console.error(\"Error fetching workflow steps:\", error);\n      res.status(500).json({ error: \"Failed to fetch workflow steps\" });\n    }\n  });\n\n  // Clear workflow steps for a conversation\n  app.delete(\"/api/conversations/:id/workflow\", async (req, res) => {\n    try {\n      await storage.clearWorkflowSteps(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error clearing workflow steps:\", error);\n      res.status(500).json({ error: \"Failed to clear workflow steps\" });\n    }\n  });\n\n  // Process a query using Gemini AI\n  app.post(\"/api/query\", async (req, res) => {\n    try {\n      const validatedRequest = queryRequestSchema.parse(req.body);\n      const { question, conversationId, role } = validatedRequest;\n\n      let convoId = conversationId;\n      \n      // Create a new conversation if none provided\n      if (!convoId) {\n        const title = question.length > 50 ? question.substring(0, 47) + \"...\" : question;\n        const conversation = await storage.createConversation({\n          title,\n          preview: question,\n        });\n        convoId = conversation.id;\n      }\n\n      // Save user message\n      await storage.createMessage({\n        conversationId: convoId,\n        role: \"user\",\n        content: question,\n        hasResponse: false,\n      });\n\n      // Process query with Gemini AI\n      const agentResponse = await processQuery(question, role);\n\n      // Save assistant message\n      await storage.createMessage({\n        conversationId: convoId,\n        role: \"assistant\",\n        content: agentResponse.intent_summary,\n        hasResponse: true,\n      });\n\n      // Update conversation preview\n      await storage.updateConversation(convoId, {\n        preview: question,\n      });\n\n      // Create workflow step if query was successful\n      if (agentResponse.workflow_step_saved) {\n        const existingSteps = await storage.getWorkflowSteps(convoId);\n        \n        // Mark previous steps as completed\n        for (const step of existingSteps) {\n          if (step.status === \"current\") {\n            await storage.updateWorkflowStep(step.id, { status: \"completed\" });\n          }\n        }\n\n        await storage.createWorkflowStep({\n          conversationId: convoId,\n          stepNumber: existingSteps.length + 1,\n          question,\n          sql: agentResponse.generated_sql,\n          status: \"current\",\n          response: agentResponse,\n        });\n      }\n\n      // Get updated workflow steps\n      const workflowSteps = await storage.getWorkflowSteps(convoId);\n\n      res.json({\n        conversationId: convoId,\n        response: agentResponse,\n        workflowSteps,\n      });\n    } catch (error) {\n      console.error(\"Error processing query:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: \"Invalid request\", details: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to process query\" });\n    }\n  });\n\n  // Validate SQL endpoint\n  app.post(\"/api/validate-sql\", async (req, res) => {\n    try {\n      const { sql } = req.body;\n      if (!sql) {\n        return res.status(400).json({ error: \"SQL is required\" });\n      }\n      const validation = validateSQL(sql);\n      res.json(validation);\n    } catch (error) {\n      console.error(\"Error validating SQL:\", error);\n      res.status(500).json({ error: \"Failed to validate SQL\" });\n    }\n  });\n\n  // Estimate query cost endpoint\n  app.post(\"/api/estimate-cost\", async (req, res) => {\n    try {\n      const { sql } = req.body;\n      if (!sql) {\n        return res.status(400).json({ error: \"SQL is required\" });\n      }\n      const estimate = estimateCost(sql);\n      res.json(estimate);\n    } catch (error) {\n      console.error(\"Error estimating cost:\", error);\n      res.status(500).json({ error: \"Failed to estimate cost\" });\n    }\n  });\n\n  // Get access control info endpoint\n  app.post(\"/api/access-control\", async (req, res) => {\n    try {\n      const { role, tablesUsed, columnsUsed } = req.body;\n      if (!role) {\n        return res.status(400).json({ error: \"Role is required\" });\n      }\n      const accessControl = getAccessControl(\n        role, \n        tablesUsed || [], \n        columnsUsed || []\n      );\n      res.json(accessControl);\n    } catch (error) {\n      console.error(\"Error getting access control:\", error);\n      res.status(500).json({ error: \"Failed to get access control info\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":7104,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"replit.md":{"content":"# MCP Analytics Portal\n\n## Overview\n\nMCP Analytics Portal is an enterprise-grade Multi-Agent Conversational Portal for secure, explainable, and optimized Snowflake data analytics. The application leverages the Model Context Protocol (MCP) to orchestrate specialized AI agents that work together to process natural language queries, generate optimized SQL, enforce security controls, and provide explainable analytics workflows.\n\nThe system operates as a conversational interface where users ask questions about their data in natural language, and a coordinated team of AI agents collaborates to produce secure, cost-optimized SQL queries with full auditability and compliance tracking.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React with TypeScript, using Vite as the build tool and bundler.\n\n**UI Component System**: The application uses shadcn/ui components (based on Radix UI primitives) with a Material Design 3 inspired design system. This choice provides:\n- Robust, accessible component primitives from Radix UI\n- Customizable styling through Tailwind CSS with CSS variables\n- Information-dense layouts suitable for enterprise analytics\n- Consistent design tokens defined in the theme system\n\n**Styling Approach**: Tailwind CSS with a custom configuration that extends the base theme with design tokens for colors, spacing, typography, and shadows. The design follows Material Design 3 principles adapted for enterprise analytics, prioritizing data clarity and information hierarchy.\n\n**State Management**: React Query (TanStack Query) handles server state, API requests, and caching. Local component state uses React hooks.\n\n**Routing**: Wouter provides lightweight client-side routing.\n\n**Type Safety**: Full TypeScript implementation with shared types between client and server.\n\n### Backend Architecture\n\n**Framework**: Express.js running on Node.js with TypeScript.\n\n**API Design**: RESTful API with endpoints for:\n- Conversation management (CRUD operations)\n- Message storage and retrieval\n- Workflow step tracking\n- Query processing through AI agent orchestration\n\n**AI Integration**: Google Gemini AI (gemini-2.5-flash model) powers the multi-agent system. The architecture defines specialized agent responsibilities:\n1. Intent Parsing Agent - extracts query components\n2. RAG-Enhanced SQL Generation Agent - generates optimized SQL\n3. Access Control & Security Agent - enforces RBAC and data masking\n4. SQL Validation & Safety Agent - ensures query safety\n5. Cost Optimization Agent - estimates and optimizes query costs\n6. Explainability & Compliance Agent - provides transparency\n7. Workflow Manager & Memory Agent - maintains conversation history\n8. Workflow Graph & Recommendation Agent - suggests next steps\n\nThis multi-agent approach provides separation of concerns, specialized expertise, and composable intelligence.\n\n**Session Management**: In-memory storage for development with a structured interface (`IStorage`) that abstracts the persistence layer, allowing easy migration to database-backed storage.\n\n**Development Server**: Vite dev server integration in development mode provides HMR (Hot Module Replacement) and optimized development workflow.\n\n### Data Architecture\n\n**Database**: PostgreSQL via Neon serverless with Drizzle ORM for type-safe database operations.\n\n**Schema Design**: Four main entities:\n- `users` - user authentication and identification\n- `conversations` - top-level analytics sessions\n- `messages` - chat history (user questions and AI responses)\n- `workflow_steps` - detailed workflow tracking with SQL, responses, and metadata\n\nThe schema uses UUIDs for primary keys and includes timestamps for audit trails. The workflow tracking system maintains full lineage of analytical steps for reproducibility and compliance.\n\n**ORM Choice**: Drizzle ORM provides type-safe database queries with minimal runtime overhead and excellent TypeScript integration. The schema is defined in TypeScript and can be pushed to the database using `drizzle-kit`.\n\n### Security Architecture\n\n**Role-Based Access Control (RBAC)**: The system simulates Snowflake RBAC with different user roles (ANALYST, DATA_ENGINEER, ADMIN) that determine:\n- Accessible tables and schemas\n- Column-level masking policies\n- Row-level security filters\n- Query cost limits\n\n**Data Masking**: Sensitive columns (email, phone, SSN) are automatically masked based on user role. The Access Control Agent enforces these policies during SQL generation.\n\n**Query Safety**: The SQL Validation Agent enforces a SELECT-only policy, blocking any data modification operations (DROP, DELETE, INSERT, UPDATE, ALTER). It also adds LIMIT clauses and prevents full table scans.\n\n**Explainability**: Every query execution includes detailed explanations of:\n- Applied security policies\n- Masked columns and reasons\n- Restricted access and justifications\n- Cost estimates and optimization suggestions\n\nThis transparency ensures compliance with data governance requirements and builds user trust.\n\n### Build and Deployment\n\n**Build Process**: Custom build script (`script/build.ts`) using:\n- Vite for client-side bundling\n- esbuild for server-side bundling with selective dependency bundling\n\n**Production Optimization**: The build process bundles frequently-used server dependencies to reduce cold start times by minimizing `openat(2)` syscalls. This is particularly important for serverless deployments.\n\n**Environment Configuration**: Environment variables control database connections, API keys, and runtime behavior.\n\n## External Dependencies\n\n### AI Services\n\n**Google Gemini AI**: Primary AI service using the `@google/genai` SDK. The gemini-2.5-flash model is selected for:\n- Fast response times suitable for interactive chat\n- Strong reasoning capabilities for SQL generation\n- Cost-effectiveness for high-volume usage\n- Structured output support for agent responses\n\nConfiguration requires `GEMINI_API_KEY` environment variable.\n\n### Database Services\n\n**Neon Serverless PostgreSQL**: Cloud-native PostgreSQL via `@neondatabase/serverless` driver. Provides:\n- Serverless scaling\n- Connection pooling\n- Low latency\n- Compatibility with edge runtimes\n\nConnection configured via `DATABASE_URL` environment variable.\n\n**Drizzle ORM**: Type-safe ORM with schema-first approach. The migration system (`drizzle-kit`) manages schema changes through the `db:push` command.\n\n### UI Component Libraries\n\n**Radix UI**: Headless, accessible component primitives for complex UI patterns (dialogs, dropdowns, tooltips, etc.). These components provide:\n- ARIA-compliant accessibility\n- Keyboard navigation\n- Focus management\n- Customizable styling\n\n**shadcn/ui**: Pre-styled components built on Radix UI primitives, customized for the application's design system.\n\n### Development Tools\n\n**Replit Integration**: Development environment plugins for:\n- Runtime error overlay\n- Cartographer (dependency visualization)\n- Development banner\n\nThese are conditionally loaded only in development mode.\n\n### Supporting Libraries\n\n- **Tailwind CSS**: Utility-first CSS framework with custom configuration\n- **React Query**: Server state management and caching\n- **Zod**: Runtime type validation and schema validation\n- **wouter**: Lightweight routing\n- **date-fns**: Date manipulation and formatting\n- **Lucide React**: Icon library","path":null,"size_bytes":7413,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/examples/StatusBadge.tsx":{"content":"import StatusBadge from \"../StatusBadge\";\n\nexport default function StatusBadgeExample() {\n  return (\n    <div className=\"flex flex-wrap gap-2\">\n      <StatusBadge status=\"success\" label=\"PASS\" />\n      <StatusBadge status=\"error\" label=\"FAIL\" />\n      <StatusBadge status=\"warning\" label=\"High Cost\" />\n      <StatusBadge status=\"info\" label=\"Info\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":370,"size_tokens":null},"client/src/components/examples/AccessControlInfo.tsx":{"content":"import AccessControlInfo from \"../AccessControlInfo\";\n\nexport default function AccessControlInfoExample() {\n  return (\n    <AccessControlInfo\n      role=\"ANALYST\"\n      maskedColumns={[\"email\", \"phone_number\", \"ssn\"]}\n      restrictedTables={[\"hr.salaries\", \"finance.expenses\"]}\n      rowFilters={[\"region IN ('NA', 'US', 'CA')\", \"department = 'Sales'\"]}\n    />\n  );\n}\n","path":null,"size_bytes":369,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/examples/ConversationItem.tsx":{"content":"import ConversationItem from \"../ConversationItem\";\n\nexport default function ConversationItemExample() {\n  return (\n    <div className=\"w-72 space-y-1 bg-sidebar p-2 rounded-md\">\n      <ConversationItem\n        id=\"1\"\n        title=\"Revenue Analysis\"\n        preview=\"Top customers by revenue in Q4\"\n        timestamp=\"2h ago\"\n        isActive={true}\n        onClick={() => console.log(\"Clicked conversation 1\")}\n      />\n      <ConversationItem\n        id=\"2\"\n        title=\"Product Performance\"\n        preview=\"Best selling products by category\"\n        timestamp=\"1d ago\"\n        isActive={false}\n        onClick={() => console.log(\"Clicked conversation 2\")}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":690,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/components/examples/AgentStatus.tsx":{"content":"import AgentStatus from \"../AgentStatus\";\n\nconst agents = [\n  { name: \"Intent Parser\", status: \"completed\" as const },\n  { name: \"RAG Retrieval\", status: \"completed\" as const },\n  { name: \"SQL Generator\", status: \"running\" as const },\n  { name: \"Validator\", status: \"idle\" as const },\n  { name: \"Cost Optimizer\", status: \"idle\" as const },\n];\n\nexport default function AgentStatusExample() {\n  return <AgentStatus agents={agents} />;\n}\n","path":null,"size_bytes":435,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, jsonb, boolean, integer } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport const conversations = pgTable(\"conversations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  preview: text(\"preview\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const insertConversationSchema = createInsertSchema(conversations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertConversation = z.infer<typeof insertConversationSchema>;\nexport type Conversation = typeof conversations.$inferSelect;\n\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  conversationId: varchar(\"conversation_id\").notNull(),\n  role: text(\"role\").notNull(), // 'user' or 'assistant'\n  content: text(\"content\").notNull(),\n  hasResponse: boolean(\"has_response\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type Message = typeof messages.$inferSelect;\n\nexport const workflowSteps = pgTable(\"workflow_steps\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  conversationId: varchar(\"conversation_id\").notNull(),\n  stepNumber: integer(\"step_number\").notNull(),\n  question: text(\"question\").notNull(),\n  sql: text(\"sql\").notNull(),\n  status: text(\"status\").notNull(), // 'completed', 'current', 'pending'\n  response: jsonb(\"response\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const insertWorkflowStepSchema = createInsertSchema(workflowSteps).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertWorkflowStep = z.infer<typeof insertWorkflowStepSchema>;\nexport type WorkflowStep = typeof workflowSteps.$inferSelect;\n\nexport const queryRequestSchema = z.object({\n  question: z.string().min(1, \"Question is required\"),\n  conversationId: z.string().optional(),\n  role: z.enum([\"analyst\", \"data_engineer\", \"admin\"]).default(\"analyst\"),\n});\n\nexport type QueryRequest = z.infer<typeof queryRequestSchema>;\n\nexport const agentResponseSchema = z.object({\n  intent_summary: z.string(),\n  retrieved_context: z.string(),\n  generated_sql: z.string(),\n  access_control_applied: z.string(),\n  cost_estimate: z.string(),\n  validation_status: z.enum([\"PASS\", \"FAIL\"]),\n  explainability_notes: z.string(),\n  result_preview: z.string(),\n  workflow_step_saved: z.boolean(),\n  recommended_next_steps: z.array(z.string()),\n  reporting_ready: z.boolean(),\n});\n\nexport type AgentResponse = z.infer<typeof agentResponseSchema>;\n","path":null,"size_bytes":3334,"size_tokens":null},"client/src/components/examples/ChatInput.tsx":{"content":"import ChatInput from \"../ChatInput\";\n\nexport default function ChatInputExample() {\n  return (\n    <ChatInput\n      onSend={(message) => console.log(\"Sending:\", message)}\n      placeholder=\"Ask about your Snowflake data...\"\n    />\n  );\n}\n","path":null,"size_bytes":238,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/examples/SQLCodeBlock.tsx":{"content":"import SQLCodeBlock from \"../SQLCodeBlock\";\n\nconst exampleSQL = `SELECT \n  customer_id,\n  customer_name,\n  SUM(order_total) AS total_revenue,\n  COUNT(DISTINCT order_id) AS order_count\nFROM analytics.orders o\nLEFT JOIN analytics.customers c \n  ON o.customer_id = c.id\nWHERE order_date >= '2024-01-01'\n  AND region = 'North America'\nGROUP BY customer_id, customer_name\nORDER BY total_revenue DESC\nLIMIT 100`;\n\nexport default function SQLCodeBlockExample() {\n  return <SQLCodeBlock sql={exampleSQL} />;\n}\n","path":null,"size_bytes":502,"size_tokens":null},"client/src/components/MessageBubble.tsx":{"content":"import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Bot, User } from \"lucide-react\";\n\ninterface MessageBubbleProps {\n  role: \"user\" | \"assistant\";\n  content: string;\n  timestamp?: string;\n}\n\nexport default function MessageBubble({ role, content, timestamp }: MessageBubbleProps) {\n  const isUser = role === \"user\";\n\n  return (\n    <div\n      className={`flex gap-3 ${isUser ? \"flex-row-reverse\" : \"\"}`}\n      data-testid={`message-${role}`}\n    >\n      <Avatar className=\"h-8 w-8 shrink-0\">\n        <AvatarFallback className={isUser ? \"bg-primary text-primary-foreground\" : \"bg-muted\"}>\n          {isUser ? <User className=\"h-4 w-4\" /> : <Bot className=\"h-4 w-4\" />}\n        </AvatarFallback>\n      </Avatar>\n      <div className={`flex max-w-[80%] flex-col gap-1 ${isUser ? \"items-end\" : \"\"}`}>\n        <div\n          className={`rounded-lg px-4 py-2.5 text-sm ${\n            isUser\n              ? \"bg-primary text-primary-foreground\"\n              : \"bg-card border border-card-border\"\n          }`}\n        >\n          {content}\n        </div>\n        {timestamp && (\n          <span className=\"text-xs text-muted-foreground\">{timestamp}</span>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1213,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/QueryResponse.tsx":{"content":"import { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport SQLCodeBlock from \"./SQLCodeBlock\";\nimport ResultsTable from \"./ResultsTable\";\nimport CostEstimateCard from \"./CostEstimateCard\";\nimport AccessControlInfo from \"./AccessControlInfo\";\nimport RecommendedSteps from \"./RecommendedSteps\";\nimport AgentStatus from \"./AgentStatus\";\nimport { FileText, Table, Shield, Lightbulb } from \"lucide-react\";\n\ninterface QueryResponseProps {\n  sql: string;\n  columns: string[];\n  data: Record<string, string | number | null>[];\n  costEstimate: {\n    bytesScanned: string;\n    credits: number;\n    optimizationScore: number;\n    warnings: string[];\n  };\n  accessControl: {\n    role: string;\n    maskedColumns: string[];\n    restrictedTables: string[];\n    rowFilters: string[];\n  };\n  recommendedSteps: { id: string; label: string; type: \"drill-down\" | \"compare\" | \"filter\" | \"aggregate\" }[];\n  agents: { name: string; status: \"idle\" | \"running\" | \"completed\" | \"error\" }[];\n  onSelectStep: (step: { id: string; label: string; type: string }) => void;\n  isLoading?: boolean;\n}\n\nexport default function QueryResponse({\n  sql,\n  columns,\n  data,\n  costEstimate,\n  accessControl,\n  recommendedSteps,\n  agents,\n  onSelectStep,\n  isLoading = false,\n}: QueryResponseProps) {\n  return (\n    <div className=\"space-y-4\" data-testid=\"query-response\">\n      <AgentStatus agents={agents} />\n\n      <Tabs defaultValue=\"query\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"query\" className=\"gap-1.5\" data-testid=\"tab-query\">\n            <FileText className=\"h-4 w-4\" />\n            Query\n          </TabsTrigger>\n          <TabsTrigger value=\"results\" className=\"gap-1.5\" data-testid=\"tab-results\">\n            <Table className=\"h-4 w-4\" />\n            Results\n          </TabsTrigger>\n          <TabsTrigger value=\"security\" className=\"gap-1.5\" data-testid=\"tab-security\">\n            <Shield className=\"h-4 w-4\" />\n            Security\n          </TabsTrigger>\n          <TabsTrigger value=\"next\" className=\"gap-1.5\" data-testid=\"tab-next\">\n            <Lightbulb className=\"h-4 w-4\" />\n            Next Steps\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"query\" className=\"mt-4 space-y-4\">\n          <SQLCodeBlock sql={sql} />\n          <CostEstimateCard {...costEstimate} />\n        </TabsContent>\n\n        <TabsContent value=\"results\" className=\"mt-4\">\n          {isLoading ? (\n            <div className=\"flex h-48 items-center justify-center rounded-md border border-border bg-muted/30\">\n              <div className=\"text-center\">\n                <div className=\"mb-2 h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto\" />\n                <p className=\"text-sm text-muted-foreground\">Executing query...</p>\n              </div>\n            </div>\n          ) : (\n            <ResultsTable columns={columns} data={data} />\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"security\" className=\"mt-4\">\n          <AccessControlInfo {...accessControl} />\n        </TabsContent>\n\n        <TabsContent value=\"next\" className=\"mt-4\">\n          <RecommendedSteps steps={recommendedSteps} onSelect={onSelectStep} />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","path":null,"size_bytes":3313,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":2560,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/examples/QueryResponse.tsx":{"content":"import QueryResponse from \"../QueryResponse\";\n\nconst exampleSQL = `SELECT \n  customer_id,\n  customer_name,\n  SUM(order_total) AS total_revenue,\n  COUNT(DISTINCT order_id) AS order_count\nFROM analytics.orders o\nLEFT JOIN analytics.customers c \n  ON o.customer_id = c.id\nWHERE order_date >= '2024-01-01'\n  AND region = 'North America'\nGROUP BY customer_id, customer_name\nORDER BY total_revenue DESC\nLIMIT 100`;\n\nconst columns = [\"customer_id\", \"customer_name\", \"total_revenue\", \"order_count\"];\n\nconst data = [\n  { customer_id: \"C-001\", customer_name: \"Acme Corp\", total_revenue: 125000, order_count: 45 },\n  { customer_id: \"C-002\", customer_name: \"TechStart Inc\", total_revenue: 98500, order_count: 32 },\n  { customer_id: \"C-003\", customer_name: \"Global Dynamics\", total_revenue: 87200, order_count: 28 },\n];\n\nconst agents = [\n  { name: \"Intent Parser\", status: \"completed\" as const },\n  { name: \"RAG\", status: \"completed\" as const },\n  { name: \"SQL Gen\", status: \"completed\" as const },\n  { name: \"Validator\", status: \"completed\" as const },\n  { name: \"Cost Opt\", status: \"completed\" as const },\n];\n\nconst recommendedSteps = [\n  { id: \"1\", label: \"Break down revenue by product category\", type: \"drill-down\" as const },\n  { id: \"2\", label: \"Compare with previous year performance\", type: \"compare\" as const },\n];\n\nexport default function QueryResponseExample() {\n  return (\n    <QueryResponse\n      sql={exampleSQL}\n      columns={columns}\n      data={data}\n      costEstimate={{\n        bytesScanned: \"2.4 GB\",\n        credits: 0.0234,\n        optimizationScore: 85,\n        warnings: [],\n      }}\n      accessControl={{\n        role: \"ANALYST\",\n        maskedColumns: [\"email\", \"phone\"],\n        restrictedTables: [],\n        rowFilters: [\"region = 'North America'\"],\n      }}\n      recommendedSteps={recommendedSteps}\n      agents={agents}\n      onSelectStep={(step) => console.log(\"Selected:\", step)}\n    />\n  );\n}\n","path":null,"size_bytes":1918,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/examples/JSONOutputCard.tsx":{"content":"import JSONOutputCard from \"../JSONOutputCard\";\n\nconst mockResponse = {\n  intent_summary: \"Retrieve top customers by revenue for North America region in 2024\",\n  retrieved_context: \"Table: analytics.orders, analytics.customers. Columns: customer_id, order_total, region, order_date\",\n  generated_sql: \"SELECT customer_id, SUM(order_total) FROM analytics.orders...\",\n  access_control_applied: \"Role: ANALYST. Row filter: region IN ('NA', 'US', 'CA')\",\n  cost_estimate: \"~2.4 GB scanned, 0.0234 credits\",\n  validation_status: \"PASS\" as const,\n  explainability_notes: \"Partition pruning applied on order_date. No sensitive columns accessed.\",\n  result_preview: \"5 rows returned. Top customer: Acme Corp ($125,000)\",\n  workflow_step_saved: true,\n  recommended_next_steps: [\n    \"Break down revenue by product category\",\n    \"Compare with previous year performance\",\n    \"Analyze customer retention rate\",\n  ],\n  reporting_ready: true,\n};\n\nexport default function JSONOutputCardExample() {\n  return <JSONOutputCard response={mockResponse} />;\n}\n","path":null,"size_bytes":1040,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"@neondatabase/serverless\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1439,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/examples/MessageBubble.tsx":{"content":"import MessageBubble from \"../MessageBubble\";\n\nexport default function MessageBubbleExample() {\n  return (\n    <div className=\"space-y-4\">\n      <MessageBubble\n        role=\"user\"\n        content=\"Show me the top 10 customers by revenue in North America for 2024\"\n        timestamp=\"2:34 PM\"\n      />\n      <MessageBubble\n        role=\"assistant\"\n        content=\"I'll analyze the customer revenue data for North America. I'm querying the orders and customers tables with the appropriate filters and aggregations.\"\n        timestamp=\"2:34 PM\"\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":570,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 9%;\n  --border: 0 0% 90%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 9%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 9%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 217 91% 35%;\n  --sidebar-primary-foreground: 217 91% 97%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 9%;\n  --sidebar-ring: 217 91% 35%;\n  --popover: 0 0% 94%;\n  --popover-foreground: 0 0% 9%;\n  --popover-border: 0 0% 88%;\n  --primary: 217 91% 35%;\n  --primary-foreground: 217 91% 97%;\n  --secondary: 0 0% 88%;\n  --secondary-foreground: 0 0% 9%;\n  --muted: 217 8% 90%;\n  --muted-foreground: 217 8% 28%;\n  --accent: 217 12% 88%;\n  --accent-foreground: 217 12% 12%;\n  --destructive: 0 84% 37%;\n  --destructive-foreground: 0 84% 97%;\n  --input: 0 0% 75%;\n  --ring: 217 91% 35%;\n  --chart-1: 217 91% 35%;\n  --chart-2: 142 76% 28%;\n  --chart-3: 262 83% 35%;\n  --chart-4: 32 95% 38%;\n  --chart-5: 340 82% 35%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 7%;\n  --foreground: 0 0% 98%;\n  --border: 0 0% 16%;\n  --card: 0 0% 9%;\n  --card-foreground: 0 0% 98%;\n  --card-border: 0 0% 12%;\n  --sidebar: 0 0% 11%;\n  --sidebar-foreground: 0 0% 98%;\n  --sidebar-border: 0 0% 14%;\n  --sidebar-primary: 217 91% 45%;\n  --sidebar-primary-foreground: 217 91% 97%;\n  --sidebar-accent: 0 0% 15%;\n  --sidebar-accent-foreground: 0 0% 98%;\n  --sidebar-ring: 217 91% 45%;\n  --popover: 0 0% 13%;\n  --popover-foreground: 0 0% 98%;\n  --popover-border: 0 0% 17%;\n  --primary: 217 91% 35%;\n  --primary-foreground: 217 91% 97%;\n  --secondary: 0 0% 17%;\n  --secondary-foreground: 0 0% 98%;\n  --muted: 217 6% 18%;\n  --muted-foreground: 217 6% 72%;\n  --accent: 217 8% 16%;\n  --accent-foreground: 217 8% 88%;\n  --destructive: 0 84% 37%;\n  --destructive-foreground: 0 84% 97%;\n  --input: 0 0% 30%;\n  --ring: 217 91% 45%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 142 76% 58%;\n  --chart-3: 262 83% 68%;\n  --chart-4: 32 95% 62%;\n  --chart-5: 340 82% 65%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":10578,"size_tokens":null},"client/src/components/SQLCodeBlock.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Copy, Check } from \"lucide-react\";\n\ninterface SQLCodeBlockProps {\n  sql: string;\n  title?: string;\n}\n\nexport default function SQLCodeBlock({ sql, title = \"Generated SQL\" }: SQLCodeBlockProps) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(sql);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const lines = sql.split(\"\\n\");\n\n  return (\n    <div className=\"rounded-md border border-border bg-muted/30\" data-testid=\"sql-code-block\">\n      <div className=\"flex items-center justify-between gap-4 border-b border-border px-4 py-2\">\n        <span className=\"text-sm font-medium text-foreground\">{title}</span>\n        <Button\n          size=\"sm\"\n          variant=\"ghost\"\n          onClick={handleCopy}\n          className=\"gap-1.5 text-xs\"\n          data-testid=\"button-copy-sql\"\n        >\n          {copied ? (\n            <>\n              <Check className=\"h-3.5 w-3.5\" />\n              Copied\n            </>\n          ) : (\n            <>\n              <Copy className=\"h-3.5 w-3.5\" />\n              Copy\n            </>\n          )}\n        </Button>\n      </div>\n      <div className=\"overflow-x-auto p-4\">\n        <pre className=\"font-mono text-sm\">\n          <code className=\"text-foreground\">\n            {lines.map((line, i) => (\n              <div key={i} className=\"flex\">\n                <span className=\"mr-4 select-none text-muted-foreground opacity-50\">\n                  {String(i + 1).padStart(2, \" \")}\n                </span>\n                <span>{highlightSQL(line)}</span>\n              </div>\n            ))}\n          </code>\n        </pre>\n      </div>\n    </div>\n  );\n}\n\nfunction highlightSQL(line: string) {\n  const keywords = /\\b(SELECT|FROM|WHERE|AND|OR|JOIN|LEFT|RIGHT|INNER|OUTER|ON|GROUP BY|ORDER BY|LIMIT|AS|COUNT|SUM|AVG|MAX|MIN|DISTINCT|IN|NOT|NULL|IS|LIKE|BETWEEN|HAVING|UNION|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP|TABLE|INDEX|VIEW|CASE|WHEN|THEN|ELSE|END)\\b/gi;\n  \n  const parts = line.split(keywords);\n  \n  return parts.map((part, i) => {\n    if (keywords.test(part)) {\n      return (\n        <span key={i} className=\"font-semibold text-primary\">\n          {part}\n        </span>\n      );\n    }\n    if (part.startsWith(\"'\") || part.startsWith('\"')) {\n      return (\n        <span key={i} className=\"text-emerald-600 dark:text-emerald-400\">\n          {part}\n        </span>\n      );\n    }\n    return part;\n  });\n}\n","path":null,"size_bytes":2545,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/ChatSidebar.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Input } from \"@/components/ui/input\";\nimport { Plus, Search } from \"lucide-react\";\nimport ConversationItem from \"./ConversationItem\";\nimport { useState } from \"react\";\n\ninterface Conversation {\n  id: string;\n  title: string;\n  preview: string;\n  timestamp: string;\n}\n\ninterface ChatSidebarProps {\n  conversations: Conversation[];\n  activeId: string | null;\n  onSelectConversation: (id: string) => void;\n  onNewConversation: () => void;\n}\n\nexport default function ChatSidebar({\n  conversations,\n  activeId,\n  onSelectConversation,\n  onNewConversation,\n}: ChatSidebarProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const filteredConversations = conversations.filter(\n    (c) =>\n      c.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      c.preview.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <aside className=\"flex h-full w-80 flex-col border-r border-border bg-sidebar\">\n      <div className=\"flex flex-col gap-3 p-4\">\n        <Button\n          onClick={onNewConversation}\n          className=\"w-full gap-2\"\n          data-testid=\"button-new-conversation\"\n        >\n          <Plus className=\"h-4 w-4\" />\n          New Analysis\n        </Button>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search conversations...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"input-search-conversations\"\n          />\n        </div>\n      </div>\n      <ScrollArea className=\"flex-1 px-2\">\n        <div className=\"space-y-1 pb-4\">\n          {filteredConversations.length > 0 ? (\n            filteredConversations.map((conversation) => (\n              <ConversationItem\n                key={conversation.id}\n                id={conversation.id}\n                title={conversation.title}\n                preview={conversation.preview}\n                timestamp={conversation.timestamp}\n                isActive={conversation.id === activeId}\n                onClick={() => onSelectConversation(conversation.id)}\n              />\n            ))\n          ) : (\n            <div className=\"px-3 py-8 text-center text-sm text-muted-foreground\">\n              {searchQuery ? \"No matching conversations\" : \"No conversations yet\"}\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n    </aside>\n  );\n}\n","path":null,"size_bytes":2605,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/JSONOutputCard.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronDown, ChevronUp } from \"lucide-react\";\nimport StatusBadge from \"./StatusBadge\";\n\ninterface AgentResponse {\n  intent_summary: string;\n  retrieved_context: string;\n  generated_sql: string;\n  access_control_applied: string;\n  cost_estimate: string;\n  validation_status: \"PASS\" | \"FAIL\";\n  explainability_notes: string;\n  result_preview: string;\n  workflow_step_saved: boolean;\n  recommended_next_steps: string[];\n  reporting_ready: boolean;\n}\n\ninterface JSONOutputCardProps {\n  response: AgentResponse;\n}\n\nexport default function JSONOutputCard({ response }: JSONOutputCardProps) {\n  const [expanded, setExpanded] = useState(false);\n\n  const mainFields = [\n    { key: \"intent_summary\", label: \"Intent Summary\" },\n    { key: \"validation_status\", label: \"Validation Status\" },\n    { key: \"cost_estimate\", label: \"Cost Estimate\" },\n  ];\n\n  const expandedFields = [\n    { key: \"retrieved_context\", label: \"Retrieved Context\" },\n    { key: \"access_control_applied\", label: \"Access Control\" },\n    { key: \"explainability_notes\", label: \"Explainability Notes\" },\n    { key: \"result_preview\", label: \"Result Preview\" },\n  ];\n\n  return (\n    <Card data-testid=\"json-output-card\">\n      <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n        <span className=\"text-sm font-medium\">Agent Response</span>\n        <div className=\"flex items-center gap-2\">\n          {response.workflow_step_saved && (\n            <StatusBadge status=\"success\" label=\"Step Saved\" />\n          )}\n          {response.reporting_ready && (\n            <StatusBadge status=\"info\" label=\"Report Ready\" />\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        <div className=\"grid gap-3\">\n          {mainFields.map((field) => (\n            <div key={field.key} className=\"flex flex-col gap-1\">\n              <span className=\"text-xs font-medium text-muted-foreground\">\n                {field.label}\n              </span>\n              {field.key === \"validation_status\" ? (\n                <StatusBadge\n                  status={response.validation_status === \"PASS\" ? \"success\" : \"error\"}\n                  label={response.validation_status}\n                />\n              ) : (\n                <span className=\"text-sm\">\n                  {response[field.key as keyof AgentResponse] as string}\n                </span>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {expanded && (\n          <div className=\"grid gap-3 border-t border-border pt-3\">\n            {expandedFields.map((field) => (\n              <div key={field.key} className=\"flex flex-col gap-1\">\n                <span className=\"text-xs font-medium text-muted-foreground\">\n                  {field.label}\n                </span>\n                <span className=\"text-sm text-muted-foreground\">\n                  {response[field.key as keyof AgentResponse] as string}\n                </span>\n              </div>\n            ))}\n            {response.recommended_next_steps.length > 0 && (\n              <div className=\"flex flex-col gap-1\">\n                <span className=\"text-xs font-medium text-muted-foreground\">\n                  Recommended Next Steps\n                </span>\n                <ul className=\"list-inside list-disc space-y-1 text-sm text-muted-foreground\">\n                  {response.recommended_next_steps.map((step, i) => (\n                    <li key={i}>{step}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        )}\n\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setExpanded(!expanded)}\n          className=\"w-full gap-1\"\n          data-testid=\"button-toggle-details\"\n        >\n          {expanded ? (\n            <>\n              <ChevronUp className=\"h-4 w-4\" />\n              Show Less\n            </>\n          ) : (\n            <>\n              <ChevronDown className=\"h-4 w-4\" />\n              Show More Details\n            </>\n          )}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":4239,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/Header.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Database, Settings, LogOut, User, Moon, Sun, PanelRightOpen, PanelRightClose } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface HeaderProps {\n  currentRole: string;\n  onRoleChange: (role: string) => void;\n  workflowPanelOpen: boolean;\n  onToggleWorkflowPanel: () => void;\n}\n\nconst roles = [\n  { value: \"analyst\", label: \"ANALYST\" },\n  { value: \"data_engineer\", label: \"DATA_ENGINEER\" },\n  { value: \"admin\", label: \"ADMIN\" },\n];\n\nexport default function Header({\n  currentRole,\n  onRoleChange,\n  workflowPanelOpen,\n  onToggleWorkflowPanel,\n}: HeaderProps) {\n  const [darkMode, setDarkMode] = useState(false);\n\n  const toggleDarkMode = () => {\n    setDarkMode(!darkMode);\n    document.documentElement.classList.toggle(\"dark\");\n  };\n\n  return (\n    <header className=\"flex h-14 items-center justify-between gap-4 border-b border-border bg-background px-4\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"rounded-md bg-primary p-1.5\">\n            <Database className=\"h-5 w-5 text-primary-foreground\" />\n          </div>\n          <div>\n            <h1 className=\"text-base font-semibold leading-tight\">MCP Analytics</h1>\n            <p className=\"text-xs text-muted-foreground\">Snowflake Intelligence</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-xs text-muted-foreground\">Role:</span>\n          <Select value={currentRole} onValueChange={onRoleChange}>\n            <SelectTrigger className=\"h-8 w-[140px]\" data-testid=\"select-role\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {roles.map((role) => (\n                <SelectItem key={role.value} value={role.value}>\n                  {role.label}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        <Button\n          size=\"icon\"\n          variant=\"ghost\"\n          onClick={toggleDarkMode}\n          data-testid=\"button-theme-toggle\"\n        >\n          {darkMode ? <Sun className=\"h-4 w-4\" /> : <Moon className=\"h-4 w-4\" />}\n        </Button>\n\n        <Button\n          size=\"icon\"\n          variant=\"ghost\"\n          onClick={onToggleWorkflowPanel}\n          data-testid=\"button-toggle-workflow\"\n        >\n          {workflowPanelOpen ? (\n            <PanelRightClose className=\"h-4 w-4\" />\n          ) : (\n            <PanelRightOpen className=\"h-4 w-4\" />\n          )}\n        </Button>\n\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-user-menu\">\n              <Avatar className=\"h-8 w-8\">\n                <AvatarFallback className=\"bg-primary text-primary-foreground text-xs\">\n                  JD\n                </AvatarFallback>\n              </Avatar>\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\" className=\"w-48\">\n            <DropdownMenuLabel>John Doe</DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem data-testid=\"menu-profile\">\n              <User className=\"mr-2 h-4 w-4\" />\n              Profile\n            </DropdownMenuItem>\n            <DropdownMenuItem data-testid=\"menu-settings\">\n              <Settings className=\"mr-2 h-4 w-4\" />\n              Settings\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem data-testid=\"menu-logout\">\n              <LogOut className=\"mr-2 h-4 w-4\" />\n              Log out\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </header>\n  );\n}\n","path":null,"size_bytes":4191,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/WorkflowPanel.tsx":{"content":"import { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Button } from \"@/components/ui/button\";\nimport WorkflowStep from \"./WorkflowStep\";\nimport { GitBranch, Download, Trash2 } from \"lucide-react\";\n\ninterface WorkflowStepData {\n  id: string;\n  stepNumber: number;\n  question: string;\n  sqlSnippet: string;\n  timestamp: string;\n  status: \"completed\" | \"current\" | \"pending\";\n}\n\ninterface WorkflowPanelProps {\n  steps: WorkflowStepData[];\n  onSelectStep: (id: string) => void;\n  onExport: () => void;\n  onClear: () => void;\n}\n\nexport default function WorkflowPanel({\n  steps,\n  onSelectStep,\n  onExport,\n  onClear,\n}: WorkflowPanelProps) {\n  return (\n    <aside className=\"flex h-full w-80 flex-col border-l border-border bg-background\">\n      <div className=\"flex items-center justify-between gap-2 border-b border-border p-4\">\n        <div className=\"flex items-center gap-2\">\n          <GitBranch className=\"h-4 w-4 text-muted-foreground\" />\n          <h2 className=\"text-sm font-semibold\">Workflow History</h2>\n        </div>\n        <div className=\"flex gap-1\">\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            onClick={onExport}\n            disabled={steps.length === 0}\n            data-testid=\"button-export-workflow\"\n          >\n            <Download className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            onClick={onClear}\n            disabled={steps.length === 0}\n            data-testid=\"button-clear-workflow\"\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n      <ScrollArea className=\"flex-1 p-4\">\n        {steps.length > 0 ? (\n          <div className=\"relative space-y-3\">\n            {steps.map((step, i) => (\n              <div key={step.id} className=\"relative\">\n                {i < steps.length - 1 && (\n                  <div className=\"absolute left-[11px] top-[52px] h-[calc(100%-20px)] w-0.5 bg-border\" />\n                )}\n                <WorkflowStep\n                  stepNumber={step.stepNumber}\n                  question={step.question}\n                  sqlSnippet={step.sqlSnippet}\n                  timestamp={step.timestamp}\n                  status={step.status}\n                  onClick={() => onSelectStep(step.id)}\n                />\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n            <GitBranch className=\"mb-3 h-10 w-10 text-muted-foreground/50\" />\n            <p className=\"text-sm text-muted-foreground\">No workflow steps yet</p>\n            <p className=\"mt-1 text-xs text-muted-foreground\">\n              Your analysis steps will appear here\n            </p>\n          </div>\n        )}\n      </ScrollArea>\n    </aside>\n  );\n}\n","path":null,"size_bytes":2861,"size_tokens":null},"client/src/components/AgentStatus.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Check, Loader2, AlertCircle } from \"lucide-react\";\n\ninterface Agent {\n  name: string;\n  status: \"idle\" | \"running\" | \"completed\" | \"error\";\n}\n\ninterface AgentStatusProps {\n  agents: Agent[];\n}\n\nconst statusIcons = {\n  idle: null,\n  running: <Loader2 className=\"h-3 w-3 animate-spin text-primary\" />,\n  completed: <Check className=\"h-3 w-3 text-emerald-600\" />,\n  error: <AlertCircle className=\"h-3 w-3 text-destructive\" />,\n};\n\nconst statusColors = {\n  idle: \"bg-muted\",\n  running: \"bg-primary/20\",\n  completed: \"bg-emerald-500/20\",\n  error: \"bg-destructive/20\",\n};\n\nexport default function AgentStatus({ agents }: AgentStatusProps) {\n  return (\n    <Card data-testid=\"agent-status\">\n      <CardContent className=\"p-3\">\n        <div className=\"mb-2 text-xs font-medium text-muted-foreground\">\n          MCP Agent Pipeline\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          {agents.map((agent) => (\n            <div\n              key={agent.name}\n              className={`flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs ${\n                statusColors[agent.status]\n              }`}\n              data-testid={`agent-${agent.name.toLowerCase().replace(/\\s+/g, \"-\")}`}\n            >\n              {statusIcons[agent.status]}\n              <span className=\"font-medium\">{agent.name}</span>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1476,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"server/gemini.ts":{"content":"import { GoogleGenAI } from \"@google/genai\";\n\n// Gemini AI service for MCP Analytics Portal\n// Uses gemini-2.5-flash for fast responses\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\n\nexport interface ParsedIntent {\n  metrics: string[];\n  dimensions: string[];\n  filters: { column: string; operator: string; value: string }[];\n  dateRange: { start: string; end: string } | null;\n  aggregations: string[];\n  limit: number;\n  sortBy: { column: string; direction: \"asc\" | \"desc\" } | null;\n}\n\nexport interface SQLGenerationResult {\n  sql: string;\n  explanation: string;\n  tablesUsed: string[];\n  columnsUsed: string[];\n}\n\nexport interface AgentResponse {\n  intent_summary: string;\n  retrieved_context: string;\n  generated_sql: string;\n  access_control_applied: string;\n  cost_estimate: string;\n  validation_status: \"PASS\" | \"FAIL\";\n  explainability_notes: string;\n  result_preview: string;\n  workflow_step_saved: boolean;\n  recommended_next_steps: string[];\n  reporting_ready: boolean;\n}\n\nconst SCHEMA_CONTEXT = `\nAvailable Snowflake Tables:\n1. analytics.orders - columns: order_id, customer_id, order_date, order_total, region, status, product_id, quantity\n2. analytics.customers - columns: id, customer_name, email, phone_number, segment, region, created_date\n3. analytics.products - columns: product_id, product_name, category, price, cost, supplier_id\n4. analytics.regions - columns: region_code, region_name, country, timezone\n\nBusiness Terms:\n- Revenue = SUM(order_total)\n- AOV (Average Order Value) = AVG(order_total)\n- Customer Count = COUNT(DISTINCT customer_id)\n- Top Customers = customers ranked by total revenue\n`;\n\nexport async function parseIntent(question: string): Promise<ParsedIntent> {\n  const systemPrompt = `You are an intent parsing agent for a Snowflake analytics system.\nParse the user's natural language question and extract structured intent.\nReturn JSON with: metrics (what to measure), dimensions (grouping), filters, dateRange, aggregations, limit, sortBy.`;\n\n  const response = await ai.models.generateContent({\n    model: \"gemini-2.5-flash\",\n    config: {\n      systemInstruction: systemPrompt,\n      responseMimeType: \"application/json\",\n      responseSchema: {\n        type: \"object\",\n        properties: {\n          metrics: { type: \"array\", items: { type: \"string\" } },\n          dimensions: { type: \"array\", items: { type: \"string\" } },\n          filters: {\n            type: \"array\",\n            items: {\n              type: \"object\",\n              properties: {\n                column: { type: \"string\" },\n                operator: { type: \"string\" },\n                value: { type: \"string\" },\n              },\n              required: [\"column\", \"operator\", \"value\"],\n            },\n          },\n          dateRange: {\n            type: \"object\",\n            nullable: true,\n            properties: {\n              start: { type: \"string\" },\n              end: { type: \"string\" },\n            },\n          },\n          aggregations: { type: \"array\", items: { type: \"string\" } },\n          limit: { type: \"number\" },\n          sortBy: {\n            type: \"object\",\n            nullable: true,\n            properties: {\n              column: { type: \"string\" },\n              direction: { type: \"string\" },\n            },\n          },\n        },\n        required: [\"metrics\", \"dimensions\", \"filters\", \"aggregations\", \"limit\"],\n      },\n    },\n    contents: `${SCHEMA_CONTEXT}\\n\\nUser Question: ${question}`,\n  });\n\n  const rawJson = response.text;\n  if (rawJson) {\n    return JSON.parse(rawJson);\n  }\n  throw new Error(\"Failed to parse intent\");\n}\n\nexport async function generateSQL(\n  question: string,\n  intent: ParsedIntent,\n  role: string\n): Promise<SQLGenerationResult> {\n  const systemPrompt = `You are a SQL generation agent for Snowflake.\nGenerate a safe, optimized SELECT-only SQL query based on the user's question and parsed intent.\nRules:\n- Only SELECT statements allowed\n- Always add LIMIT if not specified (default 1000)\n- Use fully qualified table names (schema.table)\n- Apply partition filters on date columns when possible\n- Optimize joins\n- Never use DROP, DELETE, INSERT, UPDATE, ALTER\n\nRole-based restrictions for ${role}:\n- ANALYST: Can access analytics.* tables, but email/phone columns are masked\n- DATA_ENGINEER: Full access to analytics.* tables\n- ADMIN: Full access to all tables`;\n\n  const response = await ai.models.generateContent({\n    model: \"gemini-2.5-flash\",\n    config: {\n      systemInstruction: systemPrompt,\n      responseMimeType: \"application/json\",\n      responseSchema: {\n        type: \"object\",\n        properties: {\n          sql: { type: \"string\" },\n          explanation: { type: \"string\" },\n          tablesUsed: { type: \"array\", items: { type: \"string\" } },\n          columnsUsed: { type: \"array\", items: { type: \"string\" } },\n        },\n        required: [\"sql\", \"explanation\", \"tablesUsed\", \"columnsUsed\"],\n      },\n    },\n    contents: `${SCHEMA_CONTEXT}\\n\\nUser Question: ${question}\\n\\nParsed Intent: ${JSON.stringify(intent)}\\n\\nUser Role: ${role}`,\n  });\n\n  const rawJson = response.text;\n  if (rawJson) {\n    return JSON.parse(rawJson);\n  }\n  throw new Error(\"Failed to generate SQL\");\n}\n\nexport function validateSQL(sql: string): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n  const upperSQL = sql.toUpperCase();\n\n  const dangerousKeywords = [\"DROP\", \"DELETE\", \"INSERT\", \"UPDATE\", \"ALTER\", \"TRUNCATE\", \"CREATE\", \"GRANT\", \"REVOKE\"];\n  for (const keyword of dangerousKeywords) {\n    if (upperSQL.includes(keyword)) {\n      errors.push(`Dangerous keyword detected: ${keyword}`);\n    }\n  }\n\n  if (!upperSQL.trim().startsWith(\"SELECT\")) {\n    errors.push(\"Only SELECT statements are allowed\");\n  }\n\n  if (!upperSQL.includes(\"LIMIT\")) {\n    errors.push(\"Query should include LIMIT clause\");\n  }\n\n  return { valid: errors.length === 0, errors };\n}\n\nexport function estimateCost(sql: string): { bytesScanned: string; credits: number; optimizationScore: number; warnings: string[] } {\n  const warnings: string[] = [];\n  let baseBytes = 1000000;\n  \n  const upperSQL = sql.toUpperCase();\n  const tableCount = (upperSQL.match(/FROM|JOIN/g) || []).length;\n  baseBytes *= tableCount;\n\n  if (upperSQL.includes(\"SELECT *\")) {\n    warnings.push(\"SELECT * may scan unnecessary columns\");\n    baseBytes *= 2;\n  }\n\n  if (!upperSQL.includes(\"WHERE\")) {\n    warnings.push(\"No WHERE clause - full table scan possible\");\n    baseBytes *= 5;\n  }\n\n  const limitMatch = upperSQL.match(/LIMIT\\s+(\\d+)/);\n  const limit = limitMatch ? parseInt(limitMatch[1]) : 1000;\n  if (limit > 10000) {\n    warnings.push(\"Large LIMIT may impact performance\");\n  }\n\n  const credits = (baseBytes / 1000000000) * 0.02;\n  const optimizationScore = Math.max(0, 100 - warnings.length * 15);\n\n  let bytesFormatted: string;\n  if (baseBytes >= 1000000000) {\n    bytesFormatted = `${(baseBytes / 1000000000).toFixed(1)} GB`;\n  } else if (baseBytes >= 1000000) {\n    bytesFormatted = `${(baseBytes / 1000000).toFixed(1)} MB`;\n  } else {\n    bytesFormatted = `${(baseBytes / 1000).toFixed(1)} KB`;\n  }\n\n  return {\n    bytesScanned: bytesFormatted,\n    credits: parseFloat(credits.toFixed(6)),\n    optimizationScore,\n    warnings,\n  };\n}\n\nexport function getAccessControl(role: string, tablesUsed: string[], columnsUsed: string[]) {\n  const maskedColumns: string[] = [];\n  const restrictedTables: string[] = [];\n  const rowFilters: string[] = [];\n\n  if (role === \"analyst\") {\n    if (columnsUsed.some(c => [\"email\", \"phone_number\", \"phone\", \"ssn\"].includes(c.toLowerCase()))) {\n      maskedColumns.push(...columnsUsed.filter(c => \n        [\"email\", \"phone_number\", \"phone\", \"ssn\"].includes(c.toLowerCase())\n      ));\n    }\n    restrictedTables.push(\"hr.salaries\", \"finance.expenses\");\n    rowFilters.push(\"region IN ('NA', 'US', 'CA')\");\n  } else if (role === \"data_engineer\") {\n    rowFilters.push(\"No row filters applied\");\n  }\n\n  return {\n    role: role.toUpperCase(),\n    maskedColumns,\n    restrictedTables,\n    rowFilters: rowFilters.length > 0 ? rowFilters : [],\n  };\n}\n\nexport async function generateRecommendedSteps(\n  question: string,\n  sqlResult: SQLGenerationResult\n): Promise<{ id: string; label: string; type: \"drill-down\" | \"compare\" | \"filter\" | \"aggregate\" }[]> {\n  const systemPrompt = `You are an analytics recommendation agent.\nBased on the user's question and generated SQL, suggest 3 logical next analytical steps.\nEach step should be a natural language question the user could ask next.`;\n\n  const response = await ai.models.generateContent({\n    model: \"gemini-2.5-flash\",\n    config: {\n      systemInstruction: systemPrompt,\n      responseMimeType: \"application/json\",\n      responseSchema: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          properties: {\n            id: { type: \"string\" },\n            label: { type: \"string\" },\n            type: { type: \"string\" },\n          },\n          required: [\"id\", \"label\", \"type\"],\n        },\n      },\n    },\n    contents: `Original Question: ${question}\\n\\nGenerated SQL: ${sqlResult.sql}\\n\\nTables Used: ${sqlResult.tablesUsed.join(\", \")}`,\n  });\n\n  const rawJson = response.text;\n  if (rawJson) {\n    return JSON.parse(rawJson);\n  }\n  return [\n    { id: \"1\", label: \"Break down by another dimension\", type: \"drill-down\" },\n    { id: \"2\", label: \"Compare with previous period\", type: \"compare\" },\n    { id: \"3\", label: \"Add more filters\", type: \"filter\" },\n  ];\n}\n\nexport async function processQuery(\n  question: string,\n  role: string\n): Promise<AgentResponse> {\n  try {\n    const intent = await parseIntent(question);\n    \n    const sqlResult = await generateSQL(question, intent, role);\n    \n    const validation = validateSQL(sqlResult.sql);\n    \n    let finalSQL = sqlResult.sql;\n    if (!finalSQL.toUpperCase().includes(\"LIMIT\")) {\n      finalSQL = finalSQL.replace(/;?\\s*$/, \" LIMIT 1000;\");\n    }\n    \n    const costEstimate = estimateCost(finalSQL);\n    \n    const accessControl = getAccessControl(role, sqlResult.tablesUsed, sqlResult.columnsUsed);\n    \n    const recommendedSteps = await generateRecommendedSteps(question, sqlResult);\n\n    return {\n      intent_summary: `Analyzing: ${intent.metrics.join(\", \")} by ${intent.dimensions.join(\", \") || \"total\"}`,\n      retrieved_context: `Tables: ${sqlResult.tablesUsed.join(\", \")}. Columns: ${sqlResult.columnsUsed.join(\", \")}`,\n      generated_sql: finalSQL,\n      access_control_applied: `Role: ${accessControl.role}. ${accessControl.maskedColumns.length > 0 ? `Masked: ${accessControl.maskedColumns.join(\", \")}` : \"No masking applied\"}`,\n      cost_estimate: `~${costEstimate.bytesScanned} scanned, ${costEstimate.credits} credits`,\n      validation_status: validation.valid ? \"PASS\" : \"FAIL\",\n      explainability_notes: validation.valid \n        ? sqlResult.explanation \n        : `Validation errors: ${validation.errors.join(\", \")}`,\n      result_preview: \"Query ready for execution\",\n      workflow_step_saved: true,\n      recommended_next_steps: recommendedSteps.map(s => s.label),\n      reporting_ready: validation.valid,\n    };\n  } catch (error) {\n    console.error(\"Error processing query:\", error);\n    return {\n      intent_summary: \"Failed to parse intent\",\n      retrieved_context: \"Error retrieving context\",\n      generated_sql: \"\",\n      access_control_applied: `Role: ${role.toUpperCase()}`,\n      cost_estimate: \"N/A\",\n      validation_status: \"FAIL\",\n      explainability_notes: `Error: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n      result_preview: \"No results\",\n      workflow_step_saved: false,\n      recommended_next_steps: [],\n      reporting_ready: false,\n    };\n  }\n}\n","path":null,"size_bytes":11662,"size_tokens":null},"client/src/components/examples/WorkflowPanel.tsx":{"content":"import WorkflowPanel from \"../WorkflowPanel\";\n\nconst mockSteps = [\n  {\n    id: \"1\",\n    stepNumber: 1,\n    question: \"Show top 10 customers by revenue in North America\",\n    sqlSnippet: \"SELECT customer_id, SUM(order_total)...\",\n    timestamp: \"2:30 PM\",\n    status: \"completed\" as const,\n  },\n  {\n    id: \"2\",\n    stepNumber: 2,\n    question: \"Break down by product category\",\n    sqlSnippet: \"SELECT category, SUM(revenue)...\",\n    timestamp: \"2:35 PM\",\n    status: \"current\" as const,\n  },\n  {\n    id: \"3\",\n    stepNumber: 3,\n    question: \"Compare with last year\",\n    sqlSnippet: \"SELECT YEAR(order_date), SUM(...)...\",\n    timestamp: \"2:40 PM\",\n    status: \"pending\" as const,\n  },\n];\n\nexport default function WorkflowPanelExample() {\n  return (\n    <div className=\"h-[500px]\">\n      <WorkflowPanel\n        steps={mockSteps}\n        onSelectStep={(id) => console.log(\"Selected step:\", id)}\n        onExport={() => console.log(\"Export workflow\")}\n        onClear={() => console.log(\"Clear workflow\")}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":1033,"size_tokens":null},"client/src/components/WorkflowStep.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport StatusBadge from \"./StatusBadge\";\nimport { FileText, ArrowRight } from \"lucide-react\";\n\ninterface WorkflowStepProps {\n  stepNumber: number;\n  question: string;\n  sqlSnippet: string;\n  timestamp: string;\n  status: \"completed\" | \"current\" | \"pending\";\n  onClick: () => void;\n}\n\nexport default function WorkflowStep({\n  stepNumber,\n  question,\n  sqlSnippet,\n  timestamp,\n  status,\n  onClick,\n}: WorkflowStepProps) {\n  return (\n    <Card\n      className={`cursor-pointer hover-elevate ${\n        status === \"current\" ? \"border-primary\" : \"\"\n      }`}\n      onClick={onClick}\n      data-testid={`workflow-step-${stepNumber}`}\n    >\n      <CardContent className=\"p-3\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"flex items-center gap-2\">\n            <div\n              className={`flex h-6 w-6 shrink-0 items-center justify-center rounded-full text-xs font-medium ${\n                status === \"current\"\n                  ? \"bg-primary text-primary-foreground\"\n                  : status === \"completed\"\n                  ? \"bg-emerald-600 text-white\"\n                  : \"bg-muted text-muted-foreground\"\n              }`}\n            >\n              {stepNumber}\n            </div>\n            <span className=\"text-xs text-muted-foreground\">{timestamp}</span>\n          </div>\n          {status === \"completed\" && <StatusBadge status=\"success\" label=\"Done\" />}\n          {status === \"current\" && <StatusBadge status=\"info\" label=\"Active\" />}\n        </div>\n        <p className=\"mt-2 line-clamp-2 text-sm font-medium\">{question}</p>\n        <div className=\"mt-2 flex items-center gap-2 rounded bg-muted/50 px-2 py-1\">\n          <FileText className=\"h-3 w-3 text-muted-foreground\" />\n          <code className=\"truncate text-xs text-muted-foreground\">{sqlSnippet}</code>\n        </div>\n        <div className=\"mt-2 flex items-center gap-1 text-xs text-primary\">\n          <span>Load this step</span>\n          <ArrowRight className=\"h-3 w-3\" />\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2108,"size_tokens":null},"client/src/components/examples/ChatSidebar.tsx":{"content":"import { useState } from \"react\";\nimport ChatSidebar from \"../ChatSidebar\";\n\nconst mockConversations = [\n  {\n    id: \"1\",\n    title: \"Revenue Analysis Q4\",\n    preview: \"Top customers by revenue in North America\",\n    timestamp: \"2h ago\",\n  },\n  {\n    id: \"2\",\n    title: \"Product Performance\",\n    preview: \"Best selling products by category\",\n    timestamp: \"1d ago\",\n  },\n  {\n    id: \"3\",\n    title: \"Customer Churn\",\n    preview: \"Analyze customer retention patterns\",\n    timestamp: \"3d ago\",\n  },\n];\n\nexport default function ChatSidebarExample() {\n  const [activeId, setActiveId] = useState(\"1\");\n\n  return (\n    <div className=\"h-[400px]\">\n      <ChatSidebar\n        conversations={mockConversations}\n        activeId={activeId}\n        onSelectConversation={setActiveId}\n        onNewConversation={() => console.log(\"New conversation\")}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":872,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"client/src/components/examples/CostEstimateCard.tsx":{"content":"import CostEstimateCard from \"../CostEstimateCard\";\n\nexport default function CostEstimateCardExample() {\n  return (\n    <CostEstimateCard\n      bytesScanned=\"2.4 GB\"\n      credits={0.0234}\n      optimizationScore={75}\n      warnings={[\"Consider adding partition filter on order_date\"]}\n    />\n  );\n}\n","path":null,"size_bytes":300,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/components/ChatInput.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Send, Paperclip, Mic } from \"lucide-react\";\n\ninterface ChatInputProps {\n  onSend: (message: string) => void;\n  disabled?: boolean;\n  placeholder?: string;\n}\n\nexport default function ChatInput({\n  onSend,\n  disabled = false,\n  placeholder = \"Ask a question about your data...\",\n}: ChatInputProps) {\n  const [value, setValue] = useState(\"\");\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"auto\";\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 150)}px`;\n    }\n  }, [value]);\n\n  const handleSubmit = () => {\n    if (value.trim() && !disabled) {\n      onSend(value.trim());\n      setValue(\"\");\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && (e.metaKey || e.ctrlKey)) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n\n  return (\n    <div className=\"border-t border-border bg-background p-4\" data-testid=\"chat-input\">\n      <div className=\"flex items-end gap-2\">\n        <div className=\"flex gap-1\">\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"shrink-0\"\n            data-testid=\"button-attach\"\n            onClick={() => console.log(\"Attach file clicked\")}\n          >\n            <Paperclip className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"shrink-0\"\n            data-testid=\"button-voice\"\n            onClick={() => console.log(\"Voice input clicked\")}\n          >\n            <Mic className=\"h-4 w-4\" />\n          </Button>\n        </div>\n        <Textarea\n          ref={textareaRef}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder={placeholder}\n          disabled={disabled}\n          className=\"min-h-[44px] max-h-[150px] resize-none\"\n          rows={1}\n          data-testid=\"input-message\"\n        />\n        <Button\n          size=\"icon\"\n          onClick={handleSubmit}\n          disabled={disabled || !value.trim()}\n          data-testid=\"button-send\"\n        >\n          <Send className=\"h-4 w-4\" />\n        </Button>\n      </div>\n      <div className=\"mt-2 text-center text-xs text-muted-foreground\">\n        Press <kbd className=\"rounded bg-muted px-1 py-0.5 font-mono\">Cmd</kbd> +{\" \"}\n        <kbd className=\"rounded bg-muted px-1 py-0.5 font-mono\">Enter</kbd> to send\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2698,"size_tokens":null},"client/src/pages/AnalyticsPortal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport Header from \"@/components/Header\";\nimport ChatSidebar from \"@/components/ChatSidebar\";\nimport WorkflowPanel from \"@/components/WorkflowPanel\";\nimport ChatInput from \"@/components/ChatInput\";\nimport MessageBubble from \"@/components/MessageBubble\";\nimport QueryResponse from \"@/components/QueryResponse\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface Conversation {\n  id: string;\n  title: string;\n  preview: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface Message {\n  id: string;\n  conversationId: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n  hasResponse: boolean;\n  createdAt: string;\n}\n\ninterface WorkflowStepData {\n  id: string;\n  conversationId: string;\n  stepNumber: number;\n  question: string;\n  sql: string;\n  status: \"completed\" | \"current\" | \"pending\";\n  response: AgentResponse | null;\n  createdAt: string;\n}\n\ninterface AgentResponse {\n  intent_summary: string;\n  retrieved_context: string;\n  generated_sql: string;\n  access_control_applied: string;\n  cost_estimate: string;\n  validation_status: \"PASS\" | \"FAIL\";\n  explainability_notes: string;\n  result_preview: string;\n  workflow_step_saved: boolean;\n  recommended_next_steps: string[];\n  reporting_ready: boolean;\n}\n\ninterface QueryResponseData {\n  conversationId: string;\n  response: AgentResponse;\n  workflowSteps: WorkflowStepData[];\n}\n\n// Mock result data for display (since we don't have a real Snowflake connection)\nconst mockResultColumns = [\"customer_id\", \"customer_name\", \"total_revenue\", \"order_count\"];\nconst mockResultData = [\n  { customer_id: \"C-001\", customer_name: \"Acme Corp\", total_revenue: 125000, order_count: 45 },\n  { customer_id: \"C-002\", customer_name: \"TechStart Inc\", total_revenue: 98500, order_count: 32 },\n  { customer_id: \"C-003\", customer_name: \"Global Dynamics\", total_revenue: 87200, order_count: 28 },\n  { customer_id: \"C-004\", customer_name: \"Innovate LLC\", total_revenue: 76800, order_count: 24 },\n  { customer_id: \"C-005\", customer_name: \"DataFlow Systems\", total_revenue: 65400, order_count: 21 },\n];\n\nexport default function AnalyticsPortal() {\n  const { toast } = useToast();\n  const [role, setRole] = useState(\"analyst\");\n  const [workflowPanelOpen, setWorkflowPanelOpen] = useState(true);\n  const [activeConversationId, setActiveConversationId] = useState<string | null>(null);\n  const [localMessages, setLocalMessages] = useState<Message[]>([]);\n  const [localWorkflowSteps, setLocalWorkflowSteps] = useState<WorkflowStepData[]>([]);\n  const [currentResponse, setCurrentResponse] = useState<AgentResponse | null>(null);\n  const [agentStatuses, setAgentStatuses] = useState<{ name: string; status: \"idle\" | \"running\" | \"completed\" | \"error\" }[]>([\n    { name: \"Intent Parser\", status: \"idle\" },\n    { name: \"RAG Retrieval\", status: \"idle\" },\n    { name: \"SQL Generator\", status: \"idle\" },\n    { name: \"Validator\", status: \"idle\" },\n    { name: \"Cost Optimizer\", status: \"idle\" },\n  ]);\n\n  // Fetch conversations\n  const { data: conversations = [], isLoading: isLoadingConversations } = useQuery<Conversation[]>({\n    queryKey: [\"/api/conversations\"],\n  });\n\n  // Fetch conversation details when active conversation changes\n  const { data: conversationDetails } = useQuery<{\n    conversation: Conversation;\n    messages: Message[];\n    workflowSteps: WorkflowStepData[];\n  }>({\n    queryKey: [\"/api/conversations\", activeConversationId],\n    enabled: !!activeConversationId,\n  });\n\n  // Update local state when conversation details change\n  useEffect(() => {\n    if (conversationDetails) {\n      setLocalMessages(conversationDetails.messages);\n      setLocalWorkflowSteps(conversationDetails.workflowSteps);\n      \n      // Set current response from the most recent workflow step\n      const currentStep = conversationDetails.workflowSteps.find(s => s.status === \"current\");\n      if (currentStep?.response) {\n        setCurrentResponse(currentStep.response);\n      }\n    }\n  }, [conversationDetails]);\n\n  // Query mutation\n  const queryMutation = useMutation({\n    mutationFn: async (data: { question: string; conversationId?: string; role: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/query\", data);\n      return response.json() as Promise<QueryResponseData>;\n    },\n    onSuccess: (data) => {\n      setActiveConversationId(data.conversationId);\n      setCurrentResponse(data.response);\n      setLocalWorkflowSteps(data.workflowSteps);\n      \n      // Reset agent statuses\n      setAgentStatuses(prev => prev.map(a => ({ ...a, status: \"completed\" as const })));\n      \n      // Invalidate queries to refresh data\n      queryClient.invalidateQueries({ queryKey: [\"/api/conversations\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/conversations\", data.conversationId] });\n    },\n    onError: (error) => {\n      console.error(\"Query error:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to process your query. Please try again.\",\n        variant: \"destructive\",\n      });\n      setAgentStatuses(prev => prev.map(a => ({ ...a, status: \"idle\" as const })));\n    },\n  });\n\n  // Create conversation mutation\n  const createConversationMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/conversations\", {\n        title: \"New Analysis\",\n        preview: \"Start asking questions...\",\n      });\n      return response.json() as Promise<Conversation>;\n    },\n    onSuccess: (data) => {\n      setActiveConversationId(data.id);\n      setLocalMessages([]);\n      setLocalWorkflowSteps([]);\n      setCurrentResponse(null);\n      queryClient.invalidateQueries({ queryKey: [\"/api/conversations\"] });\n    },\n  });\n\n  // Clear workflow mutation\n  const clearWorkflowMutation = useMutation({\n    mutationFn: async (conversationId: string) => {\n      await apiRequest(\"DELETE\", `/api/conversations/${conversationId}/workflow`);\n    },\n    onSuccess: () => {\n      setLocalWorkflowSteps([]);\n      if (activeConversationId) {\n        queryClient.invalidateQueries({ queryKey: [\"/api/conversations\", activeConversationId] });\n      }\n    },\n  });\n\n  const handleSendMessage = (content: string) => {\n    // Add optimistic user message\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      conversationId: activeConversationId || \"\",\n      role: \"user\",\n      content,\n      hasResponse: false,\n      createdAt: new Date().toISOString(),\n    };\n    setLocalMessages(prev => [...prev, userMessage]);\n\n    // Simulate agent pipeline progress\n    const agentOrder = [\"Intent Parser\", \"RAG Retrieval\", \"SQL Generator\", \"Validator\", \"Cost Optimizer\"];\n    agentOrder.forEach((name, index) => {\n      setTimeout(() => {\n        setAgentStatuses(prev => \n          prev.map(a => \n            a.name === name \n              ? { ...a, status: \"running\" as const }\n              : a.name === agentOrder[index - 1]\n              ? { ...a, status: \"completed\" as const }\n              : a\n          )\n        );\n      }, index * 400);\n    });\n\n    // Send query to backend\n    queryMutation.mutate({\n      question: content,\n      conversationId: activeConversationId || undefined,\n      role,\n    });\n  };\n\n  const handleNewConversation = () => {\n    setActiveConversationId(null);\n    setLocalMessages([]);\n    setLocalWorkflowSteps([]);\n    setCurrentResponse(null);\n    setAgentStatuses(prev => prev.map(a => ({ ...a, status: \"idle\" as const })));\n  };\n\n  const handleSelectConversation = (id: string) => {\n    setActiveConversationId(id);\n    setAgentStatuses(prev => prev.map(a => ({ ...a, status: \"idle\" as const })));\n  };\n\n  const handleSelectRecommendedStep = (step: { id: string; label: string; type: string }) => {\n    handleSendMessage(step.label);\n  };\n\n  const handleExportWorkflow = () => {\n    if (localWorkflowSteps.length === 0) return;\n    \n    const exportData = {\n      exportedAt: new Date().toISOString(),\n      steps: localWorkflowSteps.map(s => ({\n        stepNumber: s.stepNumber,\n        question: s.question,\n        sql: s.sql,\n        status: s.status,\n      })),\n    };\n    \n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `workflow-export-${Date.now()}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n    \n    toast({\n      title: \"Workflow Exported\",\n      description: \"Your workflow has been downloaded as JSON.\",\n    });\n  };\n\n  const handleClearWorkflow = () => {\n    if (activeConversationId) {\n      clearWorkflowMutation.mutate(activeConversationId);\n    }\n  };\n\n  // Format conversations for sidebar\n  const formattedConversations = conversations.map(c => ({\n    id: c.id,\n    title: c.title,\n    preview: c.preview,\n    timestamp: formatRelativeTime(c.updatedAt),\n  }));\n\n  // Format workflow steps for panel\n  const formattedWorkflowSteps = localWorkflowSteps.map(s => ({\n    id: s.id,\n    stepNumber: s.stepNumber,\n    question: s.question,\n    sqlSnippet: s.sql.length > 40 ? s.sql.substring(0, 37) + \"...\" : s.sql,\n    timestamp: formatTime(s.createdAt),\n    status: s.status,\n  }));\n\n  // Get recommended steps from current response\n  const recommendedSteps = currentResponse?.recommended_next_steps.map((label, i) => ({\n    id: String(i + 1),\n    label,\n    type: i === 0 ? \"drill-down\" : i === 1 ? \"compare\" : \"filter\",\n  })) as { id: string; label: string; type: \"drill-down\" | \"compare\" | \"filter\" | \"aggregate\" }[] || [];\n\n  // Parse access control from response\n  const parseAccessControl = (response: AgentResponse | null) => {\n    if (!response) {\n      return {\n        role: role.toUpperCase(),\n        maskedColumns: [],\n        restrictedTables: [],\n        rowFilters: [],\n      };\n    }\n    \n    // Parse from access_control_applied string\n    const maskedMatch = response.access_control_applied.match(/Masked: ([^.]+)/);\n    const maskedColumns = maskedMatch ? maskedMatch[1].split(\", \") : [];\n    \n    return {\n      role: role.toUpperCase(),\n      maskedColumns: role === \"analyst\" ? [\"email\", \"phone_number\"] : [],\n      restrictedTables: role === \"analyst\" ? [\"hr.salaries\", \"finance.expenses\"] : [],\n      rowFilters: role === \"analyst\" ? [\"region IN ('NA', 'US', 'CA')\"] : [],\n    };\n  };\n\n  // Parse cost estimate from response\n  const parseCostEstimate = (response: AgentResponse | null) => {\n    if (!response) {\n      return {\n        bytesScanned: \"0 KB\",\n        credits: 0,\n        optimizationScore: 100,\n        warnings: [],\n      };\n    }\n    \n    const bytesMatch = response.cost_estimate.match(/~?([0-9.]+\\s*[A-Z]+)/);\n    const creditsMatch = response.cost_estimate.match(/([0-9.]+)\\s*credits/);\n    \n    return {\n      bytesScanned: bytesMatch ? bytesMatch[1] : \"2.4 GB\",\n      credits: creditsMatch ? parseFloat(creditsMatch[1]) : 0.0234,\n      optimizationScore: response.validation_status === \"PASS\" ? 85 : 50,\n      warnings: response.validation_status === \"FAIL\" ? [response.explainability_notes] : [],\n    };\n  };\n\n  return (\n    <div className=\"flex h-screen flex-col bg-background\">\n      <Header\n        currentRole={role}\n        onRoleChange={setRole}\n        workflowPanelOpen={workflowPanelOpen}\n        onToggleWorkflowPanel={() => setWorkflowPanelOpen(!workflowPanelOpen)}\n      />\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        <ChatSidebar\n          conversations={formattedConversations}\n          activeId={activeConversationId}\n          onSelectConversation={handleSelectConversation}\n          onNewConversation={handleNewConversation}\n        />\n\n        <main className=\"flex flex-1 flex-col overflow-hidden\">\n          <ScrollArea className=\"flex-1 p-6\">\n            <div className=\"mx-auto max-w-4xl space-y-6\">\n              {localMessages.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-20 text-center\">\n                  <div className=\"mb-4 rounded-full bg-primary/10 p-4\">\n                    <svg\n                      className=\"h-12 w-12 text-primary\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={1.5}\n                        d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4z\"\n                      />\n                    </svg>\n                  </div>\n                  <h2 className=\"text-xl font-semibold\">Start a New Analysis</h2>\n                  <p className=\"mt-2 max-w-md text-muted-foreground\">\n                    Ask questions about your Snowflake data in natural language. I'll generate\n                    secure, optimized SQL queries and provide actionable insights using Gemini AI.\n                  </p>\n                  <div className=\"mt-6 flex flex-wrap justify-center gap-2\">\n                    {[\n                      \"Show top customers by revenue\",\n                      \"Analyze monthly sales trends\",\n                      \"Compare regional performance\",\n                    ].map((suggestion) => (\n                      <button\n                        key={suggestion}\n                        onClick={() => handleSendMessage(suggestion)}\n                        className=\"rounded-full border border-border px-4 py-2 text-sm transition-colors hover-elevate\"\n                        data-testid={`button-suggestion-${suggestion.toLowerCase().replace(/\\s+/g, \"-\")}`}\n                      >\n                        {suggestion}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                localMessages.map((message, index) => (\n                  <div key={message.id} className=\"space-y-4\">\n                    <MessageBubble\n                      role={message.role}\n                      content={message.content}\n                      timestamp={formatTime(message.createdAt)}\n                    />\n                    {message.role === \"assistant\" && currentResponse && index === localMessages.length - 1 && (\n                      <QueryResponse\n                        sql={currentResponse.generated_sql}\n                        columns={mockResultColumns}\n                        data={mockResultData}\n                        costEstimate={parseCostEstimate(currentResponse)}\n                        accessControl={parseAccessControl(currentResponse)}\n                        recommendedSteps={recommendedSteps}\n                        agents={agentStatuses}\n                        onSelectStep={handleSelectRecommendedStep}\n                        isLoading={queryMutation.isPending}\n                      />\n                    )}\n                  </div>\n                ))\n              )}\n\n              {queryMutation.isPending && localMessages[localMessages.length - 1]?.role === \"user\" && (\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"h-8 w-8 animate-pulse rounded-full bg-muted\" />\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"h-4 w-3/4 animate-pulse rounded bg-muted\" />\n                    <div className=\"h-4 w-1/2 animate-pulse rounded bg-muted\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          </ScrollArea>\n\n          <ChatInput onSend={handleSendMessage} disabled={queryMutation.isPending} />\n        </main>\n\n        {workflowPanelOpen && (\n          <WorkflowPanel\n            steps={formattedWorkflowSteps}\n            onSelectStep={(id) => {\n              const step = localWorkflowSteps.find(s => s.id === id);\n              if (step?.response) {\n                setCurrentResponse(step.response);\n              }\n            }}\n            onExport={handleExportWorkflow}\n            onClear={handleClearWorkflow}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction formatRelativeTime(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return \"just now\";\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return date.toLocaleDateString();\n}\n\nfunction formatTime(dateString: string): string {\n  const date = new Date(dateString);\n  return date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n}\n","path":null,"size_bytes":17005,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/examples/ResultsTable.tsx":{"content":"import ResultsTable from \"../ResultsTable\";\n\nconst columns = [\"customer_id\", \"customer_name\", \"total_revenue\", \"order_count\"];\n\nconst data = [\n  { customer_id: \"C-001\", customer_name: \"Acme Corp\", total_revenue: 125000, order_count: 45 },\n  { customer_id: \"C-002\", customer_name: \"TechStart Inc\", total_revenue: 98500, order_count: 32 },\n  { customer_id: \"C-003\", customer_name: \"Global Dynamics\", total_revenue: 87200, order_count: 28 },\n  { customer_id: \"C-004\", customer_name: \"Innovate LLC\", total_revenue: 76800, order_count: 24 },\n  { customer_id: \"C-005\", customer_name: \"DataFlow Systems\", total_revenue: 65400, order_count: 21 },\n];\n\nexport default function ResultsTableExample() {\n  return <ResultsTable columns={columns} data={data} />;\n}\n","path":null,"size_bytes":750,"size_tokens":null},"client/src/components/CostEstimateCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Database, Zap, TrendingUp, AlertTriangle } from \"lucide-react\";\n\ninterface CostEstimateCardProps {\n  bytesScanned: string;\n  credits: number;\n  optimizationScore: number;\n  warnings?: string[];\n}\n\nexport default function CostEstimateCard({\n  bytesScanned,\n  credits,\n  optimizationScore,\n  warnings = [],\n}: CostEstimateCardProps) {\n  const scoreColor =\n    optimizationScore >= 80\n      ? \"text-emerald-600 dark:text-emerald-400\"\n      : optimizationScore >= 50\n      ? \"text-amber-600 dark:text-amber-400\"\n      : \"text-red-600 dark:text-red-400\";\n\n  return (\n    <Card data-testid=\"cost-estimate-card\">\n      <CardContent className=\"p-4\">\n        <div className=\"mb-3 text-sm font-medium text-foreground\">Cost Estimate</div>\n        <div className=\"grid grid-cols-3 gap-4\">\n          <div className=\"flex items-start gap-2\">\n            <Database className=\"mt-0.5 h-4 w-4 text-muted-foreground\" />\n            <div>\n              <div className=\"text-xs text-muted-foreground\">Bytes Scanned</div>\n              <div className=\"font-mono text-sm font-medium\">{bytesScanned}</div>\n            </div>\n          </div>\n          <div className=\"flex items-start gap-2\">\n            <Zap className=\"mt-0.5 h-4 w-4 text-muted-foreground\" />\n            <div>\n              <div className=\"text-xs text-muted-foreground\">Credits</div>\n              <div className=\"font-mono text-sm font-medium\">{credits.toFixed(4)}</div>\n            </div>\n          </div>\n          <div className=\"flex items-start gap-2\">\n            <TrendingUp className=\"mt-0.5 h-4 w-4 text-muted-foreground\" />\n            <div>\n              <div className=\"text-xs text-muted-foreground\">Optimization</div>\n              <div className={`font-mono text-sm font-medium ${scoreColor}`}>\n                {optimizationScore}%\n              </div>\n            </div>\n          </div>\n        </div>\n        {warnings.length > 0 && (\n          <div className=\"mt-3 space-y-1\">\n            {warnings.map((warning, i) => (\n              <div\n                key={i}\n                className=\"flex items-center gap-2 rounded bg-amber-500/10 px-2 py-1 text-xs text-amber-700 dark:text-amber-400\"\n              >\n                <AlertTriangle className=\"h-3 w-3\" />\n                {warning}\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2429,"size_tokens":null}},"version":2}